window._walkmeWebpackJP&&(window._walkmeWebpackJP=window._walkmeWebpackJP||[]).push([[8],{501:function(r,t,a){(function(){var n=_walkmeInternals.ctx,t=n.get("PlatformDI"),e=n.get("Consts");n.register("TutorialsManager").asCtor(a(502).TutorialsManager).dependencies("Lib, Consts, PermalinkManager"),n.register("WalkthrusModule").asCtor(a(503)).dependencies("Lib, DataFixer, SiteConfigManager, WalkthrusContainer, SettingsValuesRetriever, Logger, Consts, ArrayUtils, CommonEvents, CommonUtils, WalkthruRedirectService, TimerManager, PositionHelper, BalloonsContainer, CurrentWalkthruData, WalkthruStatePersister, PlayGuidGenerator, AuditSourceManager, UiUtils, FramesetsUtils, StepRetriever, FeaturesManager, InputGenerator, StepUtils, ComplexHtmlElementsProvider, LibDestroyer,BalloonDrawerProvider, LocationMatcher, DefaultPlaceHolderConfigsCreator, WalkthruSafeStartHandler"),n.register("StepRetriever").asCtor(a(504)).dependencies("WalkthrusContainer"),n.register("WalkthruOnBeforeUnloadHandler").asCtor(a(505)).dependencies("Logger, WalkthrusModule, TimerManager, CrossDomainManager, FeaturesManager, FlowStack, WindowBeforeUnloadHandler"),n.register("WalkthrusContainer").asCtor(a(506)),n.register("CurrentWalkthruData").asCtor(a(507)).dependencies("WalkthrusContainer, Consts"),n.register("CurrentStepUI").asCtor(a(508)).dependencies("CurrentWalkthruData, StepUtils"),n.register("WalkthruStatePersister").asCtor(a(509)).dependencies("Consts, InteractionManager, WalkthrusContainer, CommonUtils, CurrentWalkthruData, WalkthruBranchData, CommonEvents"),n.register("WalkthruStateRestorer").asCtor(a(510)).dependencies("WalkthruStepsLoader, WalkthrusContainer, CurrentWalkthruData, InteractionManager, TimerManager, WalkthrusModule, Logger, SettingsValuesRetriever, CommonEvents, WalkthruStatePersister, WalkthruBranchPlayer, Consts, WalkthruBranchData, LibDestroyer, UserGuidContainer"),n.register("WalkthruStepsLoader").asCtor(a(511)).dependencies("DataFixer, CommonUtils, StepUtils,SiteConfigManager, WalkthrusContainer"),n.register("WalkthruBranchPlayer").asCtor(a(512)).dependencies("Logger, StepRetriever, WalkthrusModule, WalkthrusContainer, Lib, TimerManager, CommonEvents, Consts, CurrentWalkthruData, WalkthruStatePersister, ArrayUtils, WalkthruBranchData, CommonUtils"),n.register("WalkthruApi").asCtor(a(513)).dependencies("WalkthrusContainer, SiteConfigManager, Consts, WalkMeVisibilityChecker, CommonEvents,SettingsValuesRetriever, LabelsContainer, Logger").asSingleton(),n.register("WalkthruLegacyExternalApi").asCtor(a(514)).dependencies("WalkthrusModule, CurrentWalkthruData, WalkthrusContainer, WalkthruBranchPlayer, Logger"),n.register("WalkthruBranchData").asCtor(a(515)),n.register("WalkthruBalloonButtonsEventsBinder").asCtor(a(516)).dependencies("CurrentWalkthruData, Consts, WalkthrusModule, CommonEvents, WalkthruBranchPlayer, BalloonsContainer, LibDestroyer, FeaturesManager, BalloonButtonsEventsBinder"),n.register("WalkthruBalloonNotifier").asCtor(a(517)).dependencies("BalloonUtils, Consts, UiUtils, TimerManager, Lib, CdnServer, BalloonButtonsEventsBinder,TopContainerProvider, CurrentStepUI, HostData, FramesetsUtils"),n.register("WalkthruPopupNotificationsService").asCtor(a(518)).dependencies("PopupNotificationsService, WalkthruBalloonNotifier"),n.register("StepUtils").asCtor(a(519)).dependencies("Consts"),n.register("WalkthruSurveyActivator").asCtor(a(520)).dependencies("DeployableSurveyActivator, AuditStepsManager, StorageKeysConfigurations"),n.register("WalkthruSafeStartHandler").asCtor(a(521)).dependencies("Consts, AuditStepsManager, WalkthruRedirectService, CurrentWalkthruData, WalkthruStatePersister, AuditSafeStartManager"),n.register("WalkthrusSiteConfigDataMigrator").asCtor(a(522)).dependencies("WalkthrusContainer, WalkthrusModule, DataFixer"),n.register("DataFileWalkthruDataAppender").asCtor(a(523)).dependencies("WalkthrusContainer, WalkthrusSiteConfigDataMigrator, DeployableTypes, DataFileDataLoader, LibInitializer, TutorialsManager"),n.register("EndUserWalkthruDataConverter").asCtor(a(524)).dependencies("Consts, StepUtils, DeployablesManagerFactory, CommonUtils, ClientOrServerStorageManager, EndUserDataConverter"),n.register("WalkthrusDestroyer").asCtor(a(525)).dependencies("WalkthrusModule, TriggersManager, WalkthruBalloonNotifier, WmInternals, Consts, AuditSourceProvider"),n.register("WalkthruJawsAccessibilityUtil").asCtor(a(526)).dependencies("StepUtils, JawsAccessibilityUtil"),n.register("WalkthruEventDataAppender").asCtor(a(527)).dependencies("CurrentWalkthruData"),n.register("WalkthruEventsInitializer").asCtor(a(528)).dependencies("ApiEventRaisersContainer, WalkthruEventDataAppender"),n.register("WalkthruStartFailureHandler").asCtor(a(529)).dependencies("CommonEvents, AuditSourceProvider, SettingsValuesRetriever, WalkthrusModule"),n.register("WalkthruActionsFactory").asCtor(a(530)).dependencies("ActionsFactory, Lib, ClientOrServerStorageManager, Consts, ClientStorageManager, CommonEvents, WalkthruRedirectService, StepRetriever, WalkthrusContainer, CurrentWalkthruData, WalkthruStatePersister, WalkthrusModule, WalkthruBranchPlayer, DebuggerManager, TimerManager, Logger, ConditionCheckerFactory, CrossDomainManager, WalkthruStepsLoader, CommonUtils, JsonUtils"),n.register("WalkthruRedirectService").asCtor(a(531)).dependencies("RedirectService, TimerManager, WalkthruStatePersister"),n.register("TriggersManager").asCtor(a(532)).dependencies("TimerManager,FramesetsUtils,StepUtils,Logger,FeaturesManager,SiteConfigManager,ConditionTreeTraverser,CommonEvents,Consts,ClickTriggersListCreator,WalkthrusModule,CurrentWalkthruData,WalkthruStatePersister,WalkthruBranchPlayer,LibDestroyer,EventBinder,HostData,ConditionCheckerFactory, SettingsValuesRetriever, WalkthruOnBeforeUnloadHandler, BackButtonUtils"),n.register("BackButtonUtils").asCtor(a(533)).dependencies("WalkthrusModule, Consts, CurrentWalkthruData, StepUtils"),n.register("PlayManager").asCtor(a(534)).dependencies("FeaturesManager, Consts, WalkthrusModule, WalkthrusContainer, Logger"),n.register("BBCodeWalkthruActivator").asCtor(a(535)).dependencies("InitiatorTypeToAppTypeMapper, CommonEvents, WalkthruStepsLoader, BBCodeDeployables, Consts"),n.register("BBCodeWalkthruSurveyActivator").asCtor(a(536)).dependencies("CurrentWalkthruData, BBCodeDeployables, RunningDeployablesStopper, InitiatorTypeToAppTypeMapper,Consts"),n.register("WalkthruPopupStepElementFinderExtension").asCtor(a(537)).dependencies("StepUtils, PopupStepElementProvider"),n.register("WalkthruActionStepElementFinderExtension").asCtor(a(538)).dependencies("StepUtils, PopupStepElementProvider"),n.register("WalkthrusModuleInitializer").asCtor(a(539)).dependencies("Lib, WalkthruOnBeforeUnloadHandler, DataFileWalkthruDataAppender, EndUserWalkthruDataConverter,AnchorTagsFixer, BBCodeWalkthruActivator, WalkthrusModule, RunningDeployablesStopper,BBCodeWalkthruSurveyActivator, WalkthrusDestroyer, AutoStartTypes, DeployableTypes,WalkthruRunningState, WalkthruActionsFactory, WalkthruJawsAccessibilityUtil, WalkthruStateRestorer,DeployablesRestorer, WalkthruPopupStepElementFinderExtension, WalkthruActionStepElementFinderExtension,ElementFinderExtensionsProvider, WalkthruConditionFunctions, WalkthruConditionEvaluator,OwnershipManagerProvider, Consts, WalkthruOwnershipManager,WmInternals, AutoStartHelper, WalkthruAutoStartHelper"),n.register("WalkthruOwnershipManager").asCtor(a(540)).dependencies("CrossDomainManager, Consts, WalkthrusModule, WalkthruPassOwnershipDeterminator, WalkthrusContainer,CurrentWalkthruData, WalkthruStatePersister, StepRetriever, WalkMeInfo, WalkthruStateRestorer, Logger, PassOwnershipNextStepProvider, FeaturesManager, TimerManager, PreExecutionPassOwnershipWrapper, ClientStorageManager"),n.register("PassOwnershipNextStepProvider").asCtor(a(541)).dependencies("ClientStorageManager, Consts, WalkthrusContainer, UserGuidContainer"),n.register("WalkthruPassOwnershipDeterminator").asCtor(a(542)).dependencies("Consts"),t.register([e.PLATFORM.Web,e.PLATFORM.MobileWeb,e.PLATFORM.Desktop],function(){n.register("WalkthruAutoStartHelper").asCtor(a(543)).dependencies("DeployableTypes, WalkthrusContainer, WalkthrusModule, WalkthruPersistenceDataRetriever, Consts")}),n.register("WalkthruPersistenceDataRetriever").asCtor(a(544)).dependencies("WalkthruStatePersister, Consts, CurrentWalkthruData"),n.register("WalkthruRunningState").asCtor(a(545)).dependencies("WalkthruPersistenceDataRetriever, WalkthrusModule, Consts"),n.register("AnchorTagsFixer").asCtor(a(546)).dependencies("HostData, WalkthruOnBeforeUnloadHandler"),n.register("WalkthruConditionEvaluator").asCtor(a(547)).dependencies("CurrentWalkthruData, StepRetriever, ConditionEvaluator"),n.register("WalkthruConditionFunctions").asCtor(a(548)).dependencies("Lib, ExternalConditionsHandlers, WalkthrusContainer, StepRetriever, WalkthrusModule, CurrentWalkthruData, Consts"),n.register("AuditWtsManager").asCtor(a(549)).dependencies("DeployableTypes, EventSender, ReportInitiatorMapper, AuditingEnabledIndicator"),n.register("AuditStepsManager").asCtor(a(550)).dependencies("Logger,Consts,CommonUtils,EventSender, AuditSafeStartManager, StepActionToEventSenderStepActionNameMapper, SettingsValuesRetriever, StepActionToEventSenderActionAppTypeMapper, CommonEvents, PlayGuidGenerator,AuditingEnabledIndicator"),n.register("WalkthruActionClickedEventBinder").asCtor(a(551)).dependencies("ActionClickedEventBinder, Consts, SharedConsts, AuditStepsManager"),n.register("WalkthruStepShowerButtonsCalculator").asCtor(a(552)).dependencies("ArrayUtils, SharedConsts"),n.register("WalkthruStepShower").asCtor(a(553)).dependencies("Logger, Lib, JsonUtils, DataFixer, ComplexHtmlElementsProvider, PositionHelper,BalloonDrawerProvider, SiteConfigManager, BalloonsContainer, WalkthruStepShowerButtonsCalculator, DefaultPlaceHolderConfigsCreator, SharedConsts"),r.exports={init:function(){var t=n.get("IsInEditor"),e=n.get("AuditSourceProvider");n.get("WalkthrusModuleInitializer")[t.get()&&!e.isInPreviewMode()?"postDataFileLoaded":"init"]()}}}).call(window)},502:function(t,n,r){(function(e){(function(){"use strict";n.__esModule=!0;var t=function(a){function t(t,e,n){var r=a.call(this,{deployables:[],lib:t,type:e.DEPLOYABLE_TYPE.Tutorial})||this;return r.permalinkManager=n,r._name="Walkthru",r}return e(t,a),t.prototype.activateById=function(t,e){WalkMeAPI.startWalkthruById({id:t,fromStep:0,playInitiator:e})},t.prototype.autoStartEnabled=function(t){return!this.permalinkManager.isTrainingInStartingMode()},t}(r(135).DeployablesManager);n.TutorialsManager=t}).call(window)}).call(this,r(134))},503:function(t,e,n){(function(ht){(function(){t.exports=function(U,n,M,b,D,B,H,r,F,G,o,K,V,Y,j,Q,d,T,f,t,X,z,J,q,Z,$,tt,s,et,h){var nt=this;nt.setTutorials=function(t){a={};for(var e=0;e<t.length;e++)t[e].Steps&&n.fixSteps(t[e],M.get());b.setWalkthrus(t)},nt.isTutorialPackageHidden=function(t){var e=rt.tutorialRunSettingsMap[t.TutorialId];return!!e&&e.isPackageHidden},nt.canShowTutorial=function(t){if(0==t.IsVisible)return!1;for(var e=c(t,u.URL),n=!1,r=0;r<e.length;r++)if(p(0,e[r])){n=!0;break}if(0<e.length&&!n)return!1;if(1==D.getSettingsValue(t.Settings,"DOCTEnabled",0)){var a=D.getSettingsValue(t.Settings,"DOCT","");if(""!=a)try{var i=_walkmeInternals.ctx.get("ConditionCheckerFactory").createOld({trackUIChange:!0,featureName:"Walk-Thru Segmenation",elementName:t.Name}),o=i.getCurrentEvaluationValueAndStopEvaluating(a);if(F.deprecatedRaiseEvent(H.EVENTS.Walkthrus.WtConditionEvaluated,t),!o)return F.deprecatedRaiseEvent(H.EVENTS.Walkthrus.CannotShowWt,t),!1}catch(l){}}if(0<c(t,u.FIRST_STEP_MUST_EXIST).length){if(0==t.Steps.length)return!1;var s=t.Steps[0];return B.customerLog('First Step Condition for "'+(s.StepTitle||s.StepText)+', Walk-Thru "'+t.Name+'"'),U.findElement(s)}return F.deprecatedRaiseEvent(H.EVENTS.Walkthrus.CanShowWt,t),!0},nt.stopTutorial=function(t,e,n){F.deprecatedRaiseEvent(H.EVENTS.Walkthrus.WalkthruStopped,j.getCurrentStep()),l(),n||$.releaseBalloons(),j.state=H.WALKTHRU_STATE.NOT_RUNNING,f.removeOverlay();var r=j.currentStep;if(j.currentStep=-1,t||Q.storeStateInCookie(),_walkmeInternals.ctx.get("CrossDomainManager")&&_walkmeInternals.ctx.get("CrossDomainManager").get().enabled()&&_walkmeInternals.ctx.get("CrossDomainManager").get().reset(),!e){var a=j.getCurrentWalkthru();g(a,r,H.SURVEY_START_EVENTS.WalkThruExited)}},nt.startNewTutorial=function(d,c,p,S){var g=b.getWalkthruByIndex(d);return _walkmeInternals.ctx.get("WalkthruStepsLoader").afterStepsLoaded(g&&g.TutorialId,function(){return function(){try{B.customerLog("startNewTutorial : Index = "+d+". From Step = "+c+" testMode: "+p),f.fixFlash(),E(d);var t=!1;if(_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator=S,c=G.defaultValue(c,0),p=G.defaultValue(p,!1),_walkmeInternals.ctx.get("FlowsPlayer").abort(),!p){if(j.state!=H.WALKTHRU_STATE.WAITING_FOR_OWNERSHIP&&!_walkmeInternals.ctx.get("WalkthruOwnershipManager").walkthruStarted(d,c))return!0;W(!0,!0),_walkmeInternals.ctx.get("CrossDomainManager").get().enabled()||v(),_walkmeInternals.ctx.get("WalkthruBalloonNotifier").closePopup()}F.deprecatedRaiseEvent(H.EVENTS.Walkthrus.WalkthruStarted,g);var e=[],n=c,r=0==(c=_walkmeInternals.ctx.get("PlayManager").findFirstStep(d,c,e));if(0<c&&!p){var a=T.get();a==H.SOURCES.play||a==H.SOURCES.preview?I(d,n,c,H.STEP_STATUS.SkippedStartedFromBiggerStep):(t=!0,P(d,0,c,H.STEP_STATUS.SkippedStartedFromBiggerStep))}else 0==c&&0<(c=k(d))&&!p&&(t=!0,P(d,0,c,H.STEP_STATUS.SkippedByTutorialCondition));if(!_(d,!1)&&c<0){if(p)return!1;_walkmeInternals.ctx.get("AuditStepsManager").createPlayGuidIfNeeded(g.TutorialId);var i={tutorialIndex:d,wt:g,checkStepExistsTrace:e};if(!_walkmeInternals.ctx.get("DeployableSafeStartExecuter").handleSafeStart(h,g,i)){for(var o=0;o<e.length;o++)_walkmeInternals.ctx.get("AuditStepsManager").auditStep(g,g.Steps[e[o].stepIndex],e[o].stepStatus),I(d,e[o].stepIndex,e[o].stepIndex+1,e[o].stepStatus);var s=e[e.length-1].stepIndex,l=g;_walkmeInternals.ctx.get("WalkthruStartFailureHandler").handle(l,s),W()}}else{if(p)return!0;A(d,c,r,t?_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID:undefined,S,n)}}catch(u){return B.error(u),!1}return F.deprecatedRaiseEvent("WtHasGuid",g,{playGuid:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),F.raiseEvent(H.EVENTS.Walkthrus.WalkthruGuidGenerated,{playGuid:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),!0}()})},nt.tutorialFinished=w,nt.executeTutorialNextStep=ut,nt.postWelcomeStep=O,nt.executeCurrentStep=ft,nt.executePreviousStep=function(){j.state=H.WALKTHRU_STATE.RUNNING,$.releaseBalloons(function(){nt.stepWasCompleted(!1),j.currentStep=j.lastBackButtonStepIndex-1,nt.executeTutorialNextStep()})},nt.getAction=st,nt.getSiteConfigByTutorialId=function(t){return rt.tutorialRunSettingsMap[t]?rt.tutorialRunSettingsMap[t].siteConfig:M.get()},nt.isTutorialIdsExist=function(t){var e=r.map(t,b.getWalkthruIndexByWalkthruId),n=r.inArray(-1,e);return n==undefined||-1==n},nt.isStepTrigger=lt,nt.terminateTutorial=function(){j.stepPlayStack=[],$.releaseBalloons(),l(),F.raiseEvent("WalkthruAborted")},nt.checkTutorialSkipFirstStepCondition=k,nt.fillMissingStepAudits=P,nt.getNextStepIncludingSplit=R,nt.releaseEvents=dt,nt.stepWasCompleted=pt,nt.getPlayConditionMode=gt,nt.checkPlayStepCondition=function(t){var e=D.getSettingsValue(t.Settings,"skipStepCond","");if(0<e.length)try{return!_walkmeInternals.ctx.get("ConditionEvaluator").evaluate(e)}catch(a){return!0}if(1!=D.getSettingsValue(t.Settings,"PSCTEnabled",0))return!q.isActionStep(t)||"never"!=D.getSettingsValue(t.Settings,"whenToFire","");var n=D.getSettingsValue(t.Settings,"PSCT","");if(""==n)return!0;try{var r=_walkmeInternals.ctx.get("ConditionTreeEvaluator").evaluate(n);return F.deprecatedRaiseEvent(H.EVENTS.Walkthrus.StepHasPlayCondition,t,{playGUID:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),r}catch(a){return!1}},nt.executeTutorialStep=L,nt.checkIfStepExistsWithSkippables=Tt,nt.isStepPlayable=function(t,e){return Tt(t,e,undefined,undefined,undefined,H.CHECK_STEP_MODE.Normal)==e},nt.checkTutorialRedirectCondition=_,nt.loadTutorial=A,nt.releaseBalloonsTimeouts=l,nt.resetState=W,nt.cleanCurrentStepResources=function(){if(i){for(var t=i.length-1;0<=t;t--)i[t].cleanResources();i=[]}},nt.addCurrentStepResource=function(t){i.push(t)},nt.setMember=at,nt.removeCrossUsersState=v,nt.getMatchedSurvey=N,nt.getWalkthruSurveyFrequency=y;var rt={tutorialRunSettingsMap:{},dontContinueTutorial:!1,executeTutorialNextStepNotFinished:!1},u={URL:0,FIRST_STEP_MUST_EXIST:1,AUTO_START:2,REDIRECT:3,SKIP_FIRST_STEP:4},e="PSCTMode";function at(t,e){rt[t]=e}var m="stepCheck",a={},C=[],it=!1,ot=0,i=[];function st(t){if(a[t.Id]!=undefined)return a[t.Id];var e=D.getSettingsValue(t.Settings,"action",null);return e?(a[t.Id]=_walkmeInternals.ctx.get("ActionsFactory").get(e.actionType,e.arguments,H.STEP_PLAY_INITIATOR_ENUM.STEP,t),a[t.Id]):(B.customerLog("No action core. aborting..."),null)}function E(t){var e=b.getWalkthruByIndex(t);if(rt.tutorialRunSettingsMap[e.TutorialId]){var n=rt.tutorialRunSettingsMap[e.TutorialId].siteConfig;n&&M.set(n)}}function lt(t,e){if("number"==typeof t)return t==e;for(var n=t.split(","),r=0;r<n.length;r++)if(e+""==n[r])return!0;return!1}function I(t,e,n,r){for(var a=e;a<n;a++)if(r!=H.STEP_STATUS.SkippedByActionStep){var i=b.getWalkthruByIndex(t);F.deprecatedRaiseEvent(H.EVENTS.Walkthrus.NewSkippedStep,i.Steps[a])}}function c(t,e){var n=Array();if(!t.Conditions)return n;for(var r=0;r<t.Conditions.length;r++)t.Conditions[r].Type==e&&(t.Conditions[r].IsEnabled!=undefined&&1!=t.Conditions[r].IsEnabled||n.push(t.Conditions[r]));return n}function p(t,e){switch(e.Type){case u.URL:return!!s.isLocationMatchString(e.Content);default:B.error(new Error("Invalid condition type: "+e.Type))}}function k(t){for(var e=c(b.getWalkthruByIndex(t),u.SKIP_FIRST_STEP),n=0;n<e.length;n++){var r=e[n];if(s.isLocationMatchString(r.Content)){var a=r.ExtraData,i=a?a-1:1;return B.customerLog("The walk-thru has a skip step condition ("+r.Content+") which is true. Skipping to: "+i),i}}return 0}function _(t,e){var n,r,a,i=c(b.getWalkthruByIndex(t),u.REDIRECT);return 0!=i.length&&(n=i[0],r=e,a=n.Content,r?o.redirect(a):o.canRedirect(a))}function A(t,e,n,r,a,i){try{_walkmeInternals.ctx.get("WalkmeVisibleReporter").report(),j.stepAppearanceIndex=0;var o=b.getWalkthruByIndex(t);F.deprecatedRaiseEvent(H.EVENTS.Walkthrus.WalkthruLoaded,o),E(t),_walkmeInternals.ctx.get("ContentsManager").removeContent(),r=G.defaultValue(r,d.generateNewPlayGuid(o.TutorialId)),n=G.defaultValue(n,!0),e=G.defaultValue(e,0);var s=i==undefined?e:i;0===e&&(e=k(t)),S(t,e,r,a,[],[],[]);try{a=a||{type:H.STEP_PLAY_INITIATOR_ENUM.NONE},_walkmeInternals.ctx.get("AuditWtsManager").auditWalkthruStart(o,a,s,e,r)}catch(l){B.error(l)}T.get()!=H.SOURCES.play&&_walkmeInternals.ctx.get("WalkMeGoalsManager").startWatchingDeployable(o,r),O(t)}catch(u){B.error(u)}}function S(t,e,n,r,a,i,o){l(),$.releaseBalloons(),j.state=H.WALKTHRU_STATE.RUNNING,j.currentWalkthru=t,j.currentStep=e-1,j.stepPlayHistory=a,j.stepPlayStack=i,j.stepCompletedHistory=o,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID=n,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator=r,Q.storeStateInCookie()}function l(){K.stopTimeoutsArray("playTimeouts"),rt.executeTutorialNextStepNotFinished=!1}function g(t,e,n){if(t&&t.Settings.survey){var r=t.Settings.survey.surveyId,a=y(t.Settings.survey,n);if(a){var i={objectId:t.Id,type:H.STEP_PLAY_INITIATOR_ENUM.WALKTHRU};_walkmeInternals.ctx.get("WalkthruSurveyActivator").activateSurvey(t,n,i,r,a,undefined,e)}}}function W(t,e){j.currentWalkthru=-1,j.state=H.WALKTHRU_STATE.NOT_RUNNING,j.currentStep=-1,j.splitPointStack=[],j.stepPlayHistory=[],j.stepPlayStack=[],j.stepCompletedHistory=[],j.lastBackButtonStepIndex=-1,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID="",rt.executeTutorialNextStepNotFinished=!1,a={},rt.dontContinueTutorial=!1,it=!1,t||(_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator=null),e||Q.storeStateInCookie()}function v(){for(var t=_walkmeInternals.ctx.get("UserGuidContainer").getAllUserGuids(),e=0;e<t.length;e++){var n=t[e];_walkmeInternals.ctx.get("ClientStorageManager").removeData(H.STORAGE_KEYS.WALKTHRU_PERSISTENCE_DATA,n)}}function y(t,e){var n=N(t,e);return n&&(n.repeat||"visit")}function N(t,e){if(t.startCondition==e||t.startCondition==H.SURVEY_START_EVENTS.Both)return t}function P(t,e,n,r){for(var a=e;a<n;a++){var i=b.getWalkthruByIndex(t);_walkmeInternals.ctx.get("AuditStepsManager").auditStep(i,i.Steps[a],r)}}function w(t){$.releaseBalloons(),j.state=H.WALKTHRU_STATE.NOT_RUNNING,Q.storeStateInCookie();var e=0<j.splitPointStack.length?j.splitPointStack.pop():null,n={hadSplit:!!e,finishAfterRefresh:!!t},r=j.getCurrentWalkthru();if(F.deprecatedRaiseEvent(H.EVENTS.Walkthrus.WalkthruCompleted,r,n),f.removeOverlay(),_walkmeInternals.ctx.get("TodoListManager").updateDeployableCompleted(r.TutorialId,H.DEPLOYABLE_TYPE.Tutorial),g(r,j.currentStep,H.SURVEY_START_EVENTS.WalkThruCompleted),e){var a=b.getWalkthruByIndex(e.tutorialIndex);F.deprecatedRaiseEvent("switchToWalkthru",a.Id),F.deprecatedRaiseEvent("BackFromBranch",a),S(e.tutorialIndex,e.stepIndex,e.playGuid,e.playInitiator,e.stepPlayHistory,e.stepPlayStack,e.stepCompletedHistory),U.executeTutorialNextStep()}else j.stepPlayStack=[],_walkmeInternals.ctx.get("CrossDomainManager").get().loseOwnership()}function ut(){B.customerLog("executeTutorialNextStep - Waiting for all frames to load before executing.",3),t.waitForFramesToLoad().then(x)}function x(){if(rt.executeTutorialNextStepNotFinished)B.customerLog("executeTutorialNextStepNotFinished - skipping this executeTutorialNextStep",5);else{if(it)return it=!1,B.customerLog("executeTutorialNextStep: waiting for other window",5),B.customerLog("Waiting for other window..."),void function r(){_walkmeInternals.ctx.get("ClientStorageManager").refreshGetData(),K.playSetTimeout(function(){var t=_walkmeInternals.ctx.get("ClientStorageManager"),e=t.keysConfig.walkthru.waitForOtherWindow,n=t.getData(e.key,undefined,j.getCurrentWalkthru().userGuid);1==n?(B.customerLog("Other window finished. Resuming walk-thru here."),t.saveData(e.key,0,e.expiry,j.getCurrentWalkthru().userGuid),_walkmeInternals.ctx.get("WalkthruStateRestorer").restoreCrossUsersState()):r()},500)}();if(rt.dontContinueTutorial)B.customerLog("executeTutorialNextStep: not executing, dontContinueTutorial=true",5);else if(j.getCurrentWalkthru().Steps.length-1!=j.currentStep){rt.executeTutorialNextStepNotFinished=!0;var t,e=null==(t=R())?0:t.Delay;B.customerLog(G.formatString("Next step including split is: {0} seconds",e),5,H.LOG_FEATURES.BALLOON),K.playSetTimeout(function(){function t(){rt.executeTutorialNextStepNotFinished=!1,ft()}j.currentStep++,_walkmeInternals.ctx.get("WalkthruStepsLoader").afterStepsLoaded(j.getCurrentWalkthru().Id,function(){0<j.currentStep&&!lt(j.getPreviousStep().End,H.WALKTHRU_STEP_TRIGGER.NOTHING)?$.releaseBalloons(t):t()})},1e3*e)}else w()}}function R(){return function t(e,n,r){var a=b.getWalkthruByIndex(e);if(a.Steps.length>n+1){var i=a.Steps[n+1];return i.TutorialIndex=e,i}var o=j.splitPointStack;if(o.length>r){var s=o[o.length-1-r];return t(s.tutorialIndex,s.stepIndex-1,r+1)}return null}(j.currentWalkthru,j.currentStep,0)}function L(a){function t(t){B.customerLog(t,5,H.LOG_FEATURES.BALLOON)}var e=G.getTimer(t),i={};ot!=a.Id&&j.stepAppearanceIndex++,a.playNumber=j.stepAppearanceIndex,ot=a.Id,F.raiseEvent(H.EVENTS.Walkthrus.StepExecuting,{playNum:j.stepAppearanceIndex});var n=b.getWalkthruByIndex(j.currentWalkthru),r=G.formatString("Processing step # {0} . Step title: {1}. Walkthru: {2}",a.StepIndex+1,a.StepTitle,n.Name);if(B.customerLog(r),F.deprecatedRaiseEvent(H.EVENTS.Walkthrus.StepStarted,a),z.isFeatureEnabled("highPerf")||_walkmeInternals.ctx.get("AnchorTagsFixer").fixAnchorTagsOnBeforeUnload(),j.state!=H.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT&&j.state!=H.WALKTHRU_STATE.WAITING_FOR_ELEMENT&&j.state!=H.WALKTHRU_STATE.WAITING_FOR_CONDITION){var o=q.isActionStep(a)?H.STEP_STATUS.Shown:H.STEP_STATUS.SupposedToShow;_walkmeInternals.ctx.get("AuditStepsManager").auditStep(j.getCurrentWalkthru(),a,o)}var s=gt(a),l=nt.checkPlayStepCondition(a);if(!l&&(s==H.playConditionModes.PLAY_CONDITION||s==H.playConditionModes.BOTH&&j.state!=H.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT))return B.customerLog("Play step condition is false. Skipping step."),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(j.getCurrentWalkthru(),a,H.STEP_STATUS.SkippedByCondition),F.deprecatedRaiseEvent(H.EVENTS.Walkthrus.StepSkipped,a),void ut();if(St(a)){var u=Tt(j.currentWalkthru,a.StepIndex,0,1,undefined,H.CHECK_STEP_MODE.Normal);if(-1==u)return B.customerLog("Keep looking for element after popup."),F.deprecatedRaiseEvent(H.EVENTS.Walkthrus.LookingForStepElement,a,{playGUID:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),j.state=H.WALKTHRU_STATE.WAITING_FOR_ELEMENT,K.playSetTimeout(function(){ft()},500),void Q.storeStateInCookie();if(-2==u||-5==u){var d="Play condition isn't met, skipping the popup.";return-5==u&&(d="Loop detecetd"),B.customerLog(d),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(j.getCurrentWalkthru(),a,H.STEP_STATUS.SkippedNotFound),F.deprecatedRaiseEvent(H.EVENTS.Walkthrus.StepSkipped,a),void ut()}}var c,p,S,g,T,f,h,E,I=undefined;if(l||j.state!=H.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT){var k={},_=G.getTimer(t);B.customerLog("Step - Play Condition"),I=U.findElement(a,null,k,undefined,undefined,{type:H.ELEMENT_OWNER_TYPE_NAMES.STEP,id:a.Id,stickyType:a.Settings.sticky,owner:{type:H.ELEMENT_OWNER_TYPE_NAMES.WT,id:j.getCurrentWalkthru().Id}}),i.FETime=_("Done looking for sticky step named "+(a.StepTitle||a.StepText)+" with id "+ot),a.Score=k.score}else B.customerLog("Sticky PlayCondition isn't met."),I=!1;if(I){if(I&&!0!==I){B.customerLog("Element found:"),B.customerLog(I);var A,m=Z.getComplexHtmlElements(a,I);m&&(I=m.elements,A=m.parentElement)}F.deprecatedRaiseEvent(H.EVENTS.Walkthrus.StepElementFound,a),F.raiseEvent("BeforeNewStepShown");var C=0<j.stepPlayStack.length?j.stepPlayStack[j.stepPlayStack.length-1]:null,W=C?X.getStepById(C).StepIndex:null;if(g=a.Id,j.stepPlayHistory.push(g),(0<j.stepPlayStack.length?j.stepPlayStack[j.stepPlayStack.length-1]:null)!=g&&j.stepPlayStack.push(g),D.getSettingsValue(a.Settings,"fake",!1))return B.customerLog("This is a fake step. Continue to next step."),Q.storeStateInCookie(),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(j.getCurrentWalkthru(),a,H.STEP_STATUS.FakeFound),F.deprecatedRaiseEvent(H.EVENTS.Walkthrus.FakeStep,a),void ut();if(j.state=H.WALKTHRU_STATE.RUNNING,q.isActionStep(a))return void K.playSetTimeout(function(){st(a).doAction(),F.deprecatedRaiseEvent(H.EVENTS.Walkthrus.StepPerforming,a)},100);var v={type:H.ELEMENT_OWNER_TYPE_NAMES.step,id:a.Id,owner:{type:H.ELEMENT_OWNER_TYPE_NAMES.WT,id:j.getCurrentWalkthru().Id}},y=_walkmeInternals.ctx.get("TriggersManager").handle(I,a,j.currentStep,j.currentWalkthru,W,v),N=y.executeNextStep,P=y.clearElementEventsFuncs,w=y.buttons;D.getSettingsValue(a.Settings,"waitOtherWindow",!1)&&(it=!0),i.logicTime=e("Finished pre-balloon logic");var x=a.StepTitle,R=a.StepText;(S=a).DesignTemplateId||S.DesignTemplatePlaceholderConfigs&&0!=S.DesignTemplatePlaceholderConfigs.length||(a.DesignTemplatePlaceholderConfigs=et.createPlaceHolderConfigs(ht.get("SharedConsts").templateEntityType.balloon,a.StepTitle,a.StepText));var L=_walkmeInternals.ctx.create("Balloon",{element:I,parentElement:A,forceEmbedBalloonInIframe:!1,positionHelper:V,dontShowIoBalloon:!z.isFeatureEnabled("multSpot")&&function(t){var e=t,n=j.stepPlayHistory;if(1<n.length){var r=b.getWalkthruByIndex(j.currentWalkthru);e=X.getStepById(n[n.length-2],r)}return lt(t.End,H.WALKTHRU_STEP_TRIGGER.NOTHING)||lt(e.End,H.WALKTHRU_STEP_TRIGGER.NOTHING)}(a),isFirstStep:function(){var t=j.stepPlayHistory;if(t.length<2)return!0;for(var e=0;e<t.length-1;e++){var n=b.getWalkthruByIndex(j.currentWalkthru),r=X.getStepById(t[e],n);if(!G.isDefined(r.Settings.action))return!1}return!0}(),stepSettings:a.Settings,visibilityFilter:V.getVisibleFilterKey(a),text:{title:x,content:R,subText:(T=M.get().StepsInfoText,f=ct(),h=f.totalVisibleSteps,E=f.passedVisibleSteps,T=z.isFeatureEnabled("floatingsubtext")?(T=T.replace("{0}",H.SUBTEXT_CURRENT_START+E+H.SUBTEXT_CURRENT_END)).replace("{1}",H.SUBTEXT_TOTAL_START+h+H.SUBTEXT_TOTAL_END):(T=T.replace("{0}",E)).replace("{1}",h))},end:a.End,position:a.Position,buttons:{next:w.nextButton,done:w.doneButton,back:0<=w.backButtonStepIndex},data:{balloonEntityId:a.Id,containerEntityId:a.TutorialId,type:a.Type},configuration:a.Configuration,logger:B,drawer:tt.getBalloonDrawer(a.Configuration,a),siteConfig:M.get(),bindButtonsFunc:_walkmeInternals.ctx.get("WalkthruBalloonButtonsEventsBinder").addButtonEventsToBalloon,placeholderConfigurations:a.DesignTemplatePlaceholderConfigs,placeholderVariableValues:ct(),initiatorData:{initiator:a,type:H.STEP_PLAY_INITIATOR_ENUM.STEP}});if(L.onDestroy(function(){dt(I,elementEvents)}),L.setReleaseEvents(P),Y.add(L),Q.storeStateInCookie(),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(j.getCurrentWalkthru(),a,H.STEP_STATUS.Shown),z.isFeatureEnabled("jawsAccessibility")){var O=x||R;x&&R&&(O+=". "+R),O&&I.attr("alt",O)}L.Show(!0,function(t,e){var n;wmjQuery.extend(!0,i,t),n={balloonDiv:e,step:a},F.raiseEvent(H.EVENTS.Walkthrus.ShowStepBalloon,n);var r={Element:I,Balloon:e};F.deprecatedRaiseEvent(H.EVENTS.Walkthrus.StepShown,a,r),F.deprecatedRaiseEvent(H.EVENTS.Walkthrus.StepPerforming,a,r),L.SetTimeoutOn(function(){(function(){switch(j.state){case H.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT:case H.WALKTHRU_STATE.WAITING_FOR_NEXT_BUTTON_CLICK:case H.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE:return!0;default:return!1}})()&&(G.getSettingsValue(j.getCurrentStep().Settings,"sticky",0)?(B.customerLog("Sticky - keep looking for element.",5),$.releaseBalloons(),j.state=H.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT,ft()):j.getCurrentStep().IsSkippable?(at("dontContinueTutorial",!1),B.customerLog("Skippable - continue to next step."),ut()):j.state!=H.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE&&(B.customerLog("Stopping walk-thru."),$.releaseBalloons(),j.state=H.WALKTHRU_STATE.PAUSED,F.raiseEvent("WalkthruAborted"),F.raiseEvent("WalkthruStopped")))}),N&&(pt(),ut())}),D.getSettingsValue(a.Settings,"isSelfExecuting",!1)&&(c=a,p=I,K.libSetTimeout(function(){switch((e=c.End.split(/,/))[0]==H.WALKTHRU_STEP_TRIGGER.NEXT_BUTTON&&1<e.length?G.getInt(e[1]):G.getInt(e[0])){case H.WALKTHRU_STEP_TRIGGER.CLICK:B.customerLog("Self Executed Step - Trigger: Click",3),J.click(p);break;case H.WALKTHRU_STEP_TRIGGER.HOVER:B.customerLog("Self Executed Step - Trigger: Hover",3),J.hover(p);break;case H.WALKTHRU_STEP_TRIGGER.KEY_PRESSED:B.customerLog("Self Executed Step - Trigger: Text Input",3),J.text(p,c.Settings.selfExecuteText,undefined,undefined,c);break;case H.WALKTHRU_STEP_TRIGGER.SELECT_VALUE:var t=c.Settings.complexHtml&&c.Settings.complexHtml.val;t?(J.select(p,t),B.customerLog("Self Executed Step - Trigger: Select Value",3)):B.customerLog("SKIPPED Self Executed Step - Trigger: Select Any - not supported",3);break;default:B.customerLog("SKIPPED Self Executed Step - Trigger not supprted",3),rt.dontContinueTutorial=!1,ut()}var e},1e3*c.Settings.reactionTime||H.DEFAULT_REACTION_TIME))}else B.customerLog("Element not found."),F.deprecatedRaiseEvent(H.EVENTS.Walkthrus.StepElementNotFound,a,{playGUID:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),j.state==H.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT?(B.customerLog("Step was sticky. Keep looking for the element."),F.deprecatedRaiseEvent(H.EVENTS.Walkthrus.WaitingForStickyStep,a),j.state=H.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT,K.playSetTimeout(function(){ft()},500),Q.storeStateInCookie()):a.IsSkippable||D.getSettingsValue(a.Settings,"skipNotExists",!1)?(q.isActionStep(a)?(B.customerLog("Action step isn't valid. Skipping to next step."),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(j.getCurrentWalkthru(),a,H.STEP_STATUS.NonValidActionStep)):(B.customerLog("Skippable step. Skip to next step."),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(j.getCurrentWalkthru(),a,H.STEP_STATUS.SkippedNotFound)),F.deprecatedRaiseEvent(H.EVENTS.Walkthrus.StepSkipped,a),ut()):(B.customerLog("Keep looking for the element."),F.deprecatedRaiseEvent(H.EVENTS.Walkthrus.LookingForStepElement,a,{playGUID:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),j.state=H.WALKTHRU_STATE.WAITING_FOR_ELEMENT,K.playSetTimeout(function(){ft()},500),Q.storeStateInCookie())}function dt(t,e){for(var n=0;n<e.length;n++)t.unbind(e[n]+".mt");return!1}function ct(){for(var t,e=b.getWalkthruByIndex(j.currentWalkthru).Steps,n=0,r=0,a=0;a<e.length;a++)(t=e[a]).Type==H.STEP_TYPE.Action||parseInt(D.getSettingsValue(t.Settings,"isInvisible",0))||parseInt(D.getSettingsValue(t.Settings,"fake",0))||(n++,a<=j.currentStep&&r++);return{totalVisibleSteps:n,passedVisibleSteps:r}}function pt(t){t=G.defaultValue(t,!0);var e,n=j.getCurrentStep();F.deprecatedRaiseEvent(H.EVENTS.Walkthrus.StepCompleted,n),e=n,j.stepCompletedHistory.push(e.Id),t?(_walkmeInternals.ctx.get("AuditStepsManager").auditStep(j.getCurrentWalkthru(),n,H.STEP_STATUS.Performed),function(t){if(D.getSettingsValue(t.Settings,"resumeOtherWindow",!1)){var e=_walkmeInternals.ctx.get("ClientStorageManager"),n=e.keysConfig.walkthru.waitForOtherWindow;e.saveData(n.key,1,n.expiry,j.getCurrentWalkthru().userGuid)}}(n)):_walkmeInternals.ctx.get("AuditStepsManager").auditStep(j.getCurrentWalkthru(),n,H.STEP_STATUS.MovedBack)}function St(t){return t.Type==H.STEP_TYPE.Popup&&1==D.getSettingsValue(t.Settings,"popup-play-condition",0)}function gt(t){return D.getSettingsValue(t.Settings,e,H.playConditionModes.PLAY_CONDITION)}function O(t){-1==j.currentStep&&_(t,!0)||ut()}function Tt(f,h,E,I,k,_,A){return _walkmeInternals.ctx.get("ElementFinder").wrapSession(function(){function t(t,e){return function(t){if(C&&0!=C.length){for(var e=[],n=undefined;0<C.length;){if((n=C.pop()).id==t){!0;break}e.push(n)}if(0<e.length)for(;0<e.length;)C.push(e.pop())}}(e),B.customerLog("returned checking "+h+" ("+n.Id+") result: "+t,5,m),t}var e=b.getWalkthruByIndex(f),n=e.Steps[h];I=G.defaultValue(I,1),E=G.defaultValue(E,0);var r,a,i=function(t){for(var e=0;e<C.length;e++)if(C[e].id==t)return!0;return!1}(n.Id);if(B.customerLog("Checking if step index "+h+" ("+n.Id+") can be played. looped: "+i+" on mode:"+_,5,m),r=n,a=_,C.push({id:r.Id,mode:a}),i)return t(-5,n.Id);var o=!0;gt(n)!=H.playConditionModes.STICKY_CONDITION&&(o=nt.checkPlayStepCondition(n));var s,l,u,d=D.getSettingsValue(n.Settings,"fake",!1),c=D.getSettingsValue(n.Settings,"skipNotExists",!1)||n.IsSkippable||!o||d;if(s=h,u=o,l=c?u?H.STEP_STATUS.SkippedNotFound:H.STEP_STATUS.SkippedByCondition:H.STEP_STATUS.SupposedToShow,k&&k.push({stepIndex:s,stepStatus:l}),o&&!d&&B.customerLog("Step - Find Element "+(A||"")),o&&!d&&U.findElement(n,undefined,undefined,undefined,undefined,{type:H.ELEMENT_OWNER_TYPE_NAMES.step,id:n.Id,stickyType:n.Settings.sticky,owner:{type:H.ELEMENT_OWNER_TYPE_NAMES.WT,id:e.Id}}))return q.isActionStep(n)?t(function(t){var e=st(t);if(e.getGoToData){var n=e.getGoToData(),r=Tt(n.tutorialIndex,n.stepIndex,E,I,k,H.CHECK_STEP_MODE.Normal);if(r<0)return r}else if("stopWt"==e.type)return-2;return t.StepIndex}(n),n.Id):q.isPopupStep(n)?t(function(t){if(!St(t)||1!=I)return t.StepIndex;if(b.getWalkthruByIndex(f).Steps.length>t.StepIndex){var e=Tt(f,t.StepIndex+1,E,I,k,H.CHECK_STEP_MODE.Normal);return e<0?e:t.StepIndex}}(n),n.Id):t(h,n.Id);var p=h+I;if(c){var S;if(p<0)return t(-2,n.Id);if(p==e.Steps.length){var g=j.splitPointStack;if(g.length>E){var T=g[g.length-1-E];return S=Tt(T.tutorialIndex,T.stepIndex,E+1,I,k,H.CHECK_STEP_MODE.Normal),B.customerLog("Checking if step "+h+" ("+n.Id+") can be played. reached last step",5,m),t(S,n.Id)}return t(-2,n.Id)}return B.customerLog("Checking if step "+h+" ("+n.Id+") can be played. Skipping to: "+p,5,m),t(S=Tt(f,p,E,I,k,H.CHECK_STEP_MODE.Normal),n.Id)}return t(-1,n.Id)})}function ft(){var t=j.getCurrentStep();_walkmeInternals.ctx.get("ElementFinder").wrapSession(function(){L(t)})}_walkmeInternals.ctx.get("WmInternals").on(H.EVENTS.Flows.BeforeFlowStarted,function(){v()})}}).call(window)}).call(this,n(1))},504:function(t,e){(function(){t.exports=function(i){function r(t,e){var n=i.getWalkthruIndexByWalkthruId(t);if(-1<n){var r=a(e,i.getWalkthruByIndex(n));if(r)return r}return null}function a(t,e){if(e)return o(t,e);for(var n=i.getWalkthrus(),r=0;r<n.length;r++){var a=o(t,n[r]);if(a)return a}return null}function o(t,e){for(var n=e.Steps,r=0;r<n.length;r++)if(n[r].Id==t)return n[r];return null}this.getStepByWalkthruAndStepIds=r,this.getStepById=a,this.getStepIndex=function(t,e){var n=r(e,t);return n?n.StepIndex:-1}}}).call(window)},505:function(t,e){(function(){t.exports=function(e,n,r,a,i,o,t){this.register=function(){t.register(l)};var s=(this.setIgnoreNextBeforeUnload=function(t){s=t},!1);function l(t){o.isEmpty()&&(e.customerLog("onbeforeunload called",1),s?s=!1:(n.setMember("dontContinueTutorial",!0),r.pauseAllTimeouts(),a.get().enabled()?a.get().loseOwnership(!1,!0):i.isFeatureEnabled("noUnload")&&r.setWalkmeTimeout(function(){n.setMember("dontContinueTutorial",!1),r.resumeAllTimeouts()},3e3)))}}}).call(window)},506:function(t,e){(function(){t.exports=function(){var t=this;t.getWalkthrus=function(){return r},t.setWalkthrus=function(t){r=t},t.getWalkthruByIndex=a,t.getWalkthruById=function(t){for(var e=0;e<r.length;e++)if(r[e].TutorialId==t)return r[e];return null},t.getWalkthruIndexByWalkthruId=function(t){for(var e=-1,n=0;n<r.length;n++)if(r[n].TutorialId==t){e=n;break}return e},t.getStepByIndex=function(t,e){var n=a(t);if(n&&n.Steps[e])return n.Steps[e]};var r=[];function a(t){return r[t]}}}).call(window)},507:function(t,e){(function(){t.exports=function(t,e){var n=this;function r(){return t.getWalkthruByIndex(n.currentWalkthru)}function a(t){var e=r();return e&&e.Steps&&e.Steps[t]}n.currentWalkthru=-1,n.currentStep=-1,n.stepAppearanceIndex=0,n.splitPointStack=[],n.stepPlayHistory=[],n.stepPlayStack=[],n.stepCompletedHistory=[],n.lastBackButtonStepIndex=-1,n.getCurrentWalkthru=r,n.getCurrentStep=function(){return a(n.currentStep)},n.getPreviousStep=function(){return a(n.currentStep-1)},n.getNextStep=function(){return a(n.currentStep+1)},n.getStep=a,n.state=e.WALKTHRU_STATE.NOT_RUNNING}}).call(window)},508:function(t,e){(function(){t.exports=function(a,i){this.shouldKeepOverlay=function(){var t,e,n,r=a.getCurrentStep();return i.isSpotlightStep(r)&&(t=r,i.isPopupStep(t)&&(e=a.getPreviousStep(),n=a.getNextStep(),i.isPopupStep(e)||i.isPopupStep(n)))}}}).call(window)},509:function(t,e){(function(){t.exports=function(E,I,a,i,k,_,A){this.storeStateInCookie=function(){var t=undefined,e=undefined,n=undefined,r=undefined,a=k.getCurrentWalkthru(),i=a?a.TutorialId:-1,o=_walkmeInternals.ctx.get("UserGuidContainer").getUserGuid(),s=I.getCurrentInteractionGuid();k.state==E.WALKTHRU_STATE.RUNNING||k.state==E.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE?(t=k.currentStep+1,a.Steps.length<=k.currentStep+1&&(e=1)):k.state==E.WALKTHRU_STATE.WAITING_FOR_SPLIT?(t=k.currentStep,n=_.splitTutorialIds,r=_.splitStartFromStepId):t=k.currentStep;var l,u,d,c,p,S,g,T=(l=i,u=t,d=e,c=n,p=r,S=s,(g={})[m.CURRENT_TUTORIAL_COOKIE_NAME]=l,g[m.CURRENT_STATE_COOKIE_NAME]=k.state,g[m.CURRENT_STEP_COOKIE_NAME]=u,g[m.CURRENT_STEP_PLAY_NUMBER_COOKIE_NAME]=k.stepAppearanceIndex,g[m.CURRENT_PLAY_GUID_COOKIE_NAME]=_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID,g[m.CURRENT_PLAY_INITIATOR_COOKIE_NAME]=_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator,g[m.SPLIT_POINT_COOKIE_NAME]=k.splitPointStack,g[m.TUTORIAL_FINISHED_COOKIE_NAME]=d,g[m.STEP_PLAY_HISTORY_COOKIE_NAME]=k.stepPlayHistory,g[m.SPLIT_TUTORIAL_IDS_COOKIE_NAME]=c,g[m.SPLIT_START_FROM_STEP_COOKIE_NAME]=p,g[m.INTERACTION_GUID_COOKIE_NAME]=S,A.raiseEvent("SavingPersistenceData",g),g),f=_walkmeInternals.ctx.get("ClientStorageManager"),h=f.keysConfig.walkthru.persistenceData;f.saveData(h.key,T,h.expiry,o)},this.getPersistenceData=function(t){var e=s(t),n=o(e,-1),r={state:i.getInt(e[m.CURRENT_STATE_COOKIE_NAME],E.WALKTHRU_STATE.NOT_RUNNING),step:i.getInt(e[m.CURRENT_STEP_COOKIE_NAME],-1),playNum:e[m.CURRENT_STEP_PLAY_NUMBER_COOKIE_NAME]||k.stepAppearanceIndex,tutotrialGUID:e[m.CURRENT_PLAY_GUID_COOKIE_NAME],playInitiator:e[m.CURRENT_PLAY_INITIATOR_COOKIE_NAME],splitPointStack:i.defaultValue(e[m.SPLIT_POINT_COOKIE_NAME],[]),isTutorialFinished:i.defaultValue(e[m.TUTORIAL_FINISHED_COOKIE_NAME],0),stepPlayHistory:i.defaultValue(e[m.STEP_PLAY_HISTORY_COOKIE_NAME],[]),stepCompletedHistory:i.defaultValue(e[m.STEP_COMPLETED_HISTORY_COOKIE_NAME],[]),tutorial:a.getWalkthruIndexByWalkthruId(n),splitTutorialIds:i.defaultValue(e[m.SPLIT_TUTORIAL_IDS_COOKIE_NAME],[]),splitStartFromStepId:i.defaultValue(e[m.SPLIT_START_FROM_STEP_COOKIE_NAME],[]),interactionGuid:e[m.INTERACTION_GUID_COOKIE_NAME]};return A.raiseEvent("GettingPersistenceData",{persistenceData:e,current:r}),r},this.getRunningWalkthruId=function(t){return o(s(t))};var m=E.WALKTHRU_PERSISTANCE_DATA_FIELDS;function o(t,e){return i.getInt(t[m.CURRENT_TUTORIAL_COOKIE_NAME],e)}function s(t){return _walkmeInternals.ctx.get("ClientStorageManager").getData(E.STORAGE_KEYS.WALKTHRU_PERSISTENCE_DATA,{},t)}}}).call(window)},510:function(t,e){(function(){t.exports=function(n,u,d,c,p,S,g,T,f,h,E,I,k,_,a){function t(t){g.customerLog("Restoring cross user state",5);var e=a.getAllUserGuids();if(!e.length)return t&&t(),!1;for(var n=0;n<e.length;n++){var r=e[n];if(i(r,t))return r}return!1}function i(s,l){var t=h.getRunningWalkthruId(s);function e(){var t,e,n,r=(t=s,e=h.getPersistenceData(t),(n=u.getStepByIndex(e.tutorial,e.step))&&(e.isTutorialFinished||e.state!=I.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT&&e.state!=I.WALKTHRU_STATE.WAITING_FOR_NEXT_BUTTON_CLICK||T.getSettingsValue(n.Settings,"sticky",0)||n.IsSkippable||(g.customerLog("page change happened while waiting for element - pausing walkthru",2),e.state=I.WALKTHRU_STATE.PAUSED)),e);d.stepAppearanceIndex=r.playNum,d.splitPointStack=r.splitPointStack,d.stepPlayHistory=r.stepPlayHistory,d.currentWalkthru=r.tutorial,d.currentStep=r.step,d.stepCompletedHistory=r.stepCompletedHistory,d.state=r.state,f.raiseEvent("RestoringStateFromCookie",r),c.setCurrentInteractionGuid(r.interactionGuid),r.tutotrialGUID&&(_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID=r.tutotrialGUID),_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator=r.playInitiator;var a=u.getStepByIndex(d.currentWalkthru,d.currentStep);function i(){p.playSetTimeout(function(){S.executeCurrentStep()},1e3*a.Delay)}if(d.state==I.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE||d.state==I.WALKTHRU_STATE.PASSING_OWNERSHIP&&a){d.currentStep--;var o=u.getStepByIndex(d.currentWalkthru,d.currentStep);o&&(o.playNumber=d.stepAppearanceIndex),S.stepWasCompleted(!0),d.currentStep++}if(g.customerLog("isTutorialFinished: "+r.isTutorialFinished,5),1!=r.isTutorialFinished||d.state!=I.WALKTHRU_STATE.RUNNING&&d.state!=I.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE&&d.state!=I.WALKTHRU_STATE.PASSING_OWNERSHIP)if(g.customerLog("Continue from cookie: currentTutorial: "+d.currentWalkthru+" -- currentState: "+d.state+" -- currentStep: "+d.currentStep+" -- currentPlayGUID: "+_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID+" -- currentUserGUID: "+s,5),!a||d.state!=I.WALKTHRU_STATE.RUNNING&&d.state!=I.WALKTHRU_STATE.WAITING_FOR_ELEMENT&&d.state!=I.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT&&d.state!=I.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE&&d.state!=I.WALKTHRU_STATE.WAITING_FOR_CONDITION&&d.state!=I.WALKTHRU_STATE.PASSING_OWNERSHIP)if(a&&d.state==I.WALKTHRU_STATE.WAITING_FOR_REDIRECT)S.loadTutorial(d.currentWalkthru,0,!1,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator);else if(a&&d.state==I.WALKTHRU_STATE.WAITING_FOR_OWNERSHIP)S.startNewTutorial(d.currentWalkthru,d.currentStep,!1,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator);else if(!a||d.state!=I.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT&&d.state!=I.WALKTHRU_STATE.WAITING_FOR_NEXT_BUTTON_CLICK)if(d.state==I.WALKTHRU_STATE.WAITING_FOR_SPLIT)k.splitTutorialIds=r.splitTutorialIds,k.splitStartFromStepId=r.splitStartFromStepId,E.resumeSplit();else{if(d.state!=I.WALKTHRU_STATE.PAUSED)return S.resetState(),g.customerLog("Invalid cookie data. Not running tutorial. (userGuid : "+s+")",5),l&&l(!1),!1;g.customerLog("Tutorial was paused while restoring state from cookie. This can happen for several reasons when SPA is configured: A trigger for a balloon or wait for conditions has not been fullfilled. Alterntively an autostart is defined with sonar on an element that causes SPA page change. Please define the autostart without sonar.",1),_.releaseBalloons(),S.releaseBalloonsTimeouts(),S.resetState(),f.raiseEvent("WalkthruAborted")}else T.getSettingsValue(a.Settings,"sticky",0)?(g.customerLog("Sticky - keep looking for element",5),d.state=I.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT,i()):a.IsSkippable&&(d.getCurrentWalkthru().Steps.length==d.currentStep+1?S.tutorialFinished():(d.currentStep++,d.state=I.WALKTHRU_STATE.RUNNING,i()));else i();else S.tutorialFinished(!0);return l&&l(!0),!0}t?n.afterStepsLoaded(t,e):e()}this.restore=t,this.restoreCrossUsersState=t,this.restoreStateFromCookie=i}}).call(window)},511:function(e,t,n){(function(t,g){(function(){e.exports=function(s,l,u,d,c){var n=this;n.LoadStepsForWT=function(t){return n.afterStepsLoaded(t,function(){})},n.afterStepsLoaded=function(e,t){if(a[e])return a[e].then(t,t);var i=c.getWalkthrus(),o=function(t){for(var e=c.getWalkthrus(),n=0;n<e.length;n++)if(e[n].TutorialId==t)return n;return-1}(e);return i[o]&&0==i[o].Steps.length?(a[e]=new g(function(a,t){r.load(e).then(function(t){var e,n,r;0==i[o].Steps.length?(e=o,n=t,(r=c.getWalkthrus())[e].Steps=n,s.fixSteps(r[e],d.get()),function(t,e){for(var n=[],r=0;r<t.length;r++){var a=t[r];if(u.isBranchStep(a)){var i=a.Settings.action.arguments.wtId;n.push(p(i))}n=n.concat(S(a))}l.executeParallel({functionsToExecute:n,successCallback:e})}(t,a)):a()},t)}).then(t,t),!0):t()};var r,a={};function p(e){return function(t){a[e]?t():n.afterStepsLoaded(e,t)}}function S(t){var e=[];if(t.LinkedTutorialIds)for(var n=t.LinkedTutorialIds.split(";"),r=0;r<n.length;r++)n[r]&&e.push(p(n[r]));return e}r=t.create("NoPublishStepsLoader",{jsonpCallbackPrefix:"steps",fileNamePrefix:"wt"})}}).call(window)}).call(this,n(1),n(28))},512:function(t,e){(function(){t.exports=function(s,o,l,u,d,c,p,S,g,T,f,h,E){function I(i){_walkmeInternals.ctx.get("ElementFinder").wrapSession(function(){try{var e,t;i=i||1e3;var n=0;if(1==h.splitTutorialIds.length){if(t=h.splitTutorialIds[0],h.splitStartFromStepId!=undefined){var r=o.getStepIndex(h.splitStartFromStepId,t);-1!=r&&(n=r),s.customerLog(E.formatString("Resuming split, walkthru id: {0}, step index: {1}",t,n))}}else t=function(t){try{s.customerLog("Multiple branch: Going through all walk-thrus.");var e=(i=t,f.map(i,function(t){return u.getWalkthruById(t).Steps[0]})),n=(r=e,a=f.map(r,function(t){var e,n,r=(e=t.TutorialId,(n=u.getWalkthruById(e))?n.Name:"");s.customerLog("Check walk-thru: "+t.TutorialId+" ("+r+")");var a=d.findElement(t);return a?s.customerLog("First step found."):s.customerLog("First step not found."),{step:t,element:a}}),a=f.filter(a,function(t){return t.element}),f.map(a,function(t){return t.step}));if(1==n.length)return n[0].TutorialId;if(!(1<n.length))return null;s.customerLog("can't decide which tutorial to play",5),s.customerLog(n.length+" walk-thrus match. Cannot choose which walk-thru to start.")}catch(o){s.error(o)}var r,a,i}(h.splitTutorialIds);t?(p.deprecatedRaiseEvent("switchToWalkthru",t),e=u.getWalkthruIndexByWalkthruId(t),c.playSetTimeout(function(){var t={type:S.STEP_PLAY_INITIATOR_ENUM.BRANCHING,objectId:g.getCurrentStep().Id,appType:S.EVENT_SENDER_EVENT_APPS.Step};l.loadTutorial(e,n,!1,undefined,t)},i),T.storeStateInCookie()):(s.customerLog("Try again in 1000ms."),c.playSetTimeout(function(){I()},1e3))}catch(a){s.error(a)}})}this.makeSplit=function(t,e,n,r,a){var i;g.state=S.WALKTHRU_STATE.WAITING_FOR_SPLIT,1!=n&&(i=e,g.getCurrentWalkthru().Steps.length<=g.currentStep+1||g.splitPointStack.push({tutorialIndex:g.currentWalkthru,stepIndex:i!=undefined?i:g.currentStep+1,playGuid:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID,playInitiator:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator,stepPlayHistory:g.stepPlayHistory,stepCompletedHistory:g.stepCompletedHistory,stepPlayStack:g.stepPlayStack})),h.splitTutorialIds=t,h.splitStartFromStepId=r,T.storeStateInCookie(),l.stepWasCompleted(),I(a)},this.resumeSplit=I}}).call(window)},513:function(t,e){(function(){t.exports=function(s,d,l,u,c,p,S,t){var g=this;g.getWalkthrus=function(t){try{for(var e=s.getWalkthrus(),n=new Array,r=0;r<e.length;r++){var a=e[r].CustomField1;a&&(a=(a=(a=(a=a.replace(/&quot;/gi,'"')).replace(/&apos;/gi,"'")).replace(/&#39;/gi,"'")).replace(/&amp;/gi,"&"));var i={Index:r,Name:e[r].Name,Id:e[r].TutorialId,Visible:e[r].IsVisible,CustomField1:a,Description:e[r].Description,Keywords:e[r].Keywords};t&&(i.ConditionsPassed=_walkMe.canShowTutorial(e[r]),i.isPackageHidden=_walkMe.isTutorialPackageHidden(e[r]),e[r].Keywords==undefined?i.Keywords=[]:i.Keywords=e[r].Keywords),n.push(i)}return n}catch(o){T("walkMeAPI - error running getWalkthrus.",3)}},g.getWalkthrusLabels=function(t){try{var e=(l=p.getSettingsValue(d.get().Settings,"labels",null))&&1==l.useLabels?S.get():null;if(null==e)return null;for(var n=this.getWalkthrus(t),r=function(t,e){for(var n=[],r=0;r<t.length;r++)for(var a=t[r].LinkedTutorials,i=0;i<a.length;i++)n.push(a[i]);for(var o=[],r=0;r<e.length;r++)E(e[r].Id,n)||o.push(e[r]);return o}(e,n),a=d.get(),i=[],o=0;o<e.length;o++){var s={Name:e[o].Name,Id:e[o].Id,Walkthrus:h(n,e[o].LinkedTutorials,e[o].Id)};i.push(s)}return{unlabeledWalkthrus:r,labels:i,unlabeledFirst:a.Settings.labels&&1==a.Settings.labels.unlabeldOnTop}}catch(u){T("walkMeAPI - error running getWalkthrusLabels.",3)}var l},g.startWalkthruById=function(t,e){try{"object"!=typeof t&&(t={id:t,fromStep:e});var n=t.id,r=t.fromStep,a=t.playInitiator;if(n<0||"number"!=typeof n)return!1;var i=f(n);return!(i<0)&&(a||(a={type:l.STEP_PLAY_INITIATOR_ENUM.API}),g.startWalkthruByIndex({index:i,fromStep:r,playInitiator:a}))}catch(o){T("walkMeAPI - error running startWalkthruById.",3)}},g.startWalkthruByIndex=function(t,e){try{if(!u.isWalkMeVisible())return!1;"object"!=typeof t&&(t={index:t,fromStep:e});var n=t.index,r=t.fromStep,a=t.playInitiator;return!(n<0||"number"!=typeof n)&&(a||(a={type:l.STEP_PLAY_INITIATOR_ENUM.API}),i=a,c.raiseEvent(l.EVENTS.ApiWasCalled,{initiator:i}),_walkMe.startNewTutorial(n,r,!1,a))}catch(o){T("walkMeAPI - error running startWalkthruByIndex.",3)}var i},g.canStartWalkthru=function(t,e){try{if(!u.isWalkMeVisible())return!1;if(t<0||"number"!=typeof t)return!1;var n=f(t);return!(n<0)&&_walkMe.startNewTutorial(n,e,!0,l.STEP_PLAY_INITIATOR_ENUM.API)}catch(r){T("walkMeAPI - error running canStartWalkthru.",3)}},g.setWalkthruVisibility=function(t,e){try{var n=s.getWalkthrus(),r=f(t);return!(r<0||(n[r].IsVisible=e,0))}catch(a){T("walkMeAPI - error running setWalkthruVisibility.",3)}},g.stopWalkthru=function(){try{_walkMe.stopTutorial()}catch(t){T("walkMeAPI - error running stopWalkthru.",3)}};var T=t.wrapCustomerLog("walkmeAPI");function f(t){for(var e=s.getWalkthrus(),n=0;n<e.length;n++)if(e[n].TutorialId==t)return n;return-1}function h(t,e,n){for(var r=[],a=0;a<t.length;a++)if(E(t[a].Id,e)){var i=mtjQuery.extend(!0,{},t[a]);i.labelId=n,r.push(i)}return r}function E(t,e){for(var n=0;n<e.length;n++)if(e[n]==t)return!0;return!1}}}).call(window)},514:function(t,e){(function(){t.exports=function(i,t,e,n,o){var r=this;r.setTutorials=i.setTutorials,r.isTutorialPackageHidden=i.isTutorialPackageHidden,r.canShowTutorial=i.canShowTutorial,r.stopTutorial=i.stopTutorial,r.startNewTutorial=i.startNewTutorial,r.tutorialFinished=i.tutorialFinished,r.executeTutorialNextStep=i.executeTutorialNextStep,r.postWelcomeStep=i.postWelcomeStep,r.executeCurrentStep=i.executeCurrentStep,r.getCurrentTutorial=t.getCurrentWalkthru,r.getTutorials=e.getWalkthrus,r.setTutorialsForEditor=function(t,e){try{for(var n=_walkmeInternals.ctx.get("JsonUtils").secureEvalJSON(t),r=0;r<n.length;r++)n[r].userGuid=e;i.setTutorials(n)}catch(a){o.error(a)}},r.getState=function(){return t.state},r.forceSplit=function(){n.makeSplit.apply(null,arguments)},r.runTutorialsActionConditions={}}}).call(window)},515:function(t,e){(function(){t.exports=function(){this.splitTutorialIds=[],this.splitStartFromStepId}}).call(window)},516:function(t,e){(function(){t.exports=function(r,a,i,o,e,s,l,u,d){function c(t){mtjQuery(".walkme-action-close, .walkme-action-cancel",t).click(function(t){!function(t){var e={ClickEvent:t};o.raiseEvent("UserStoppedWalkthru",e);var n=-1==r.currentStep;n||_walkmeInternals.ctx.get("AuditStepsManager").auditStep(r.getCurrentWalkthru(),r.getCurrentStep(),a.STEP_STATUS.Exited),i.stopTutorial(n),o.raiseEvent("UserStoppedWalkthruAfterStop",e)}(t)})}function p(t){t.durationHandler&&(t.durationHandler.clear(),t.durationHandler=null)}function S(t){for(var e,n=s.getAll(),r=0;r<n.length;r++)n[r].releaseEvents(t)&&(e=!0);return e}function g(t){return!(t.Type!=a.STEP_TYPE.Popup||!t.LinkedTutorialIds||!i.isTutorialIdsExist(t.LinkedTutorialIds.split(";"))||(e.makeSplit(t.LinkedTutorialIds.split(";")),0))}this.addButtonEventsToBalloon=function(t,e){var n;n=t,mtjQuery(".walkme-action-next, .walkme-action-start",n).click(function(t){!function(){o.raiseEvent("NextButtonClicked");var t=r.getCurrentStep();o.deprecatedRaiseEvent(a.EVENTS.Walkthrus.StepTriggered,t),p(t),S()||(r.state=a.WALKTHRU_STATE.RUNNING,l.releaseBalloons(function(){g(t)||(i.stepWasCompleted(),i.executeTutorialNextStep())}))}()}),mtjQuery(".walkme-action-back",n).click(function(t){o.raiseEvent("BackButtonClicked"),p(r.getCurrentStep()),r.stepPlayStack.pop(),(u.isFeatureEnabled("backButtonAlways")||!S(r.lastBackButtonStepIndex-1))&&i.executePreviousStep()}),mtjQuery(".walkme-action-done",n).click(function(t){!function(){o.raiseEvent("DoneButtonClicked");var t=r.getCurrentStep();if(o.deprecatedRaiseEvent(a.EVENTS.Walkthrus.StepTriggered,t),p(t),!g(t)){var e=S();e||(i.stepWasCompleted(),i.tutorialFinished())}}()}),c(t),d.addButtonEventsToBalloon(t,e)},this.attachBalloonXButtonClickEvent=c}}).call(window)},517:function(t,e){(function(){t.exports=function(c,d,p,S,g,T,f,h,e,E,I){var k,_;this.showFailPopup=function(t,e,n,r){r+="<div style='float: right'>",r+=function(t,e,n,r){(r=c.fixConfiguration(r)).ButtonBorderColor=r.ButtonBorderColor||"#6c84a6";var a="rtl"==t.Direction?"right":"left";c.fixGradientColorsInConfiguration(r,"ButtonBgColor"),c.fixGradientColorsInConfiguration(r,"ButtonBgColor2");var i=r.ButtonBgColor,o=r.ButtonBgColor2,s=r.ButtonShadowWidth,l=r.BalloonButtonRadius,u=i!=o,d="CSS-RESET "+(u?"background:-moz-linear-gradient(top, "+i+", "+o+");background:-webkit-gradient(linear, left top, left bottom, color-stop(0%,"+i+"), color-stop(100%,"+o+"));background:-webkit-linear-gradient(top, "+i+" 0%,"+o+" 100%);background:-o-linear-gradient(top, "+i+" 0%,"+o+" 100%);background:-ms-linear-gradient(top, "+i+" 0%,"+o+" 100%);background:linear-gradient(to bottom, "+i+" 0%,"+o+' 100%);filter: progid:DXImageTransform.Microsoft.gradient( startColorstr="'+i+'", endColorstr="'+o+'",GradientType=0 );':"background-color:"+i+";")+"border: 1px solid "+r.ButtonBorderColor+";color:"+r.ButtonTextColor+"; cursor: pointer; display: inline-block; float: none; font-size: 14px; font-weight: normal;font-family: Arial; margin-"+a+": 6px; padding: 2px 14px; text-align: center; text-decoration: none; position: static;overflow: visible;-moz-box-shadow: 0 0 "+s+"px rgba(0, 0, 0, 0.4);-webkit-box-shadow: 0 0 "+s+"px rgba(0, 0, 0, 0.4); box-shadow: 0 0 "+s+"px rgba(0, 0, 0, 0.4); -moz-border-radius:"+l+"px;-webkit-border-radius:"+l+"px;border-radius:"+l+"px;";return i!=o&&E.isIE()&&(d+="border-radius: 0px;"),u&&CommonUtils.isGradientUsingFilter(d)&&(d+="background: url("+T.get()+"/player/resources/images/spacer.gif) repeat;"),d=d.replace(/CSS-RESET/g,A),"<button class='"+e+"' type='button' style='"+d+"'>"+n+"</button>"}(t,"walkme-custom-first-step-not-available-ok-button mt-custom-first-step-not-available-ok-button CUSTOM-TUTORIAL-ID","OK",e),function(t,e,n,r,a,i,o){var s='<div class="mt-to-destroy walkme-custom-popup mt-custom-popup walkme-custom-popup-'+n+" mt-custom-popup-"+n+' CUSTOM-TUTORIAL-ID mt-to-destroy" id="walkme-popup-body" style="CSS-RESET width:'+a+'px">'+r+"</div>";s=(s=s.replace(/CSS-RESET/g,A)).replace(/CUSTOM-TUTORIAL-ID/g,"walkme-custom-walkthru-"+i);var l=h.getTopContainer();l.append(s),(k=mtjQuery("#walkme-popup-body",l)).css({position:"fixed","z-index":d.POPUP_BALLOON_Z_INDEX,padding:"8px 12px 12px 12px","font-family":"Arial"}),c.setStyleForBalloon(k,e,!1);var u=0;mtjQuery.each(mtjQuery("[width], [style*=width]",k),function(t,e){mtjQuery(e).width()>u&&(u=mtjQuery(e).width())}),k.width()<u&&k.css("width",u+"px"),g.centerElementInPage(k,!1),_=S.playSetInterval(function(){g.centerElementInPage(k,!0)},1e3),E.isQuirksMode()||I.shouldHandlePageAsFramesets()||p.displayOverlay(2147483630,!0),k.fadeIn("slow"),f.addButtonEventsToBalloon(k,{objectId:i,type:d.STEP_PLAY_INITIATOR_ENUM.WALKTHRU}),o&&o(k)}(0,e,"first-step-not-available",r+="</div>",420,n.Id,a)},this.closePopup=n;var A="display: block; padding: 0; margin: 0;\tvertical-align: baseline; border-collapse: inherit; background: none; border-spacing: 1px 1px; line-height: normal; border: none none; height: auto; text-indent: inherit;  font-family: Arial; letter-spacing: normal; text-align: left; text-transform: none; font-weight: normal; outline: invert none medium; width: auto;  border-top: none; border-right: none; border-bottom: none; border-left: none; direction: ltr; position: static; top: auto; left: auto;";function n(t){_&&_.clear(),e.shouldKeepOverlay()||p.removeOverlay(),p.destroyDivWithIframes(k,t),k=null}function a(t){mtjQuery(".walkme-custom-first-step-not-available-ok-button",t).click(function(){n()})}}}).call(window)},518:function(t,e){(function(){t.exports=function(s,l){this.showFailedToStartPopup=function(t,e,n){if("v3"==(r=t).BalloonSettings.BalloonVersion||"vm1"==r.BalloonSettings.BalloonVersion)return s.showFailedToStartPopup(t,e,n.Settings.bbcode_v,n.Id);var r,a=t.BalloonSettings,i={balloonSettings:a,alertText:e,isOldBalloon:!0,bbCodeVersion:n.Settings.bbcode_v,balloonEntityId:n.Id},o=s.createHtmlForNotAvailablePopup(i);l.showFailPopup(t,a,n,o)}}}).call(window)},519:function(t,e){(function(){t.exports=function(e){this.isActionStep=function(t){return t.Type&&t.Type==e.STEP_TYPE.Action},this.isBranchStep=function(t){return t.Type&&t.Type==e.STEP_TYPE.Action&&t.Settings&&t.Settings.action&&t.Settings.action.actionType==e.STEP_ACTION.Branch},this.isPopupStep=function(t){return t&&t.Type&&t.Type==e.STEP_TYPE.Popup},this.isSpotlightStep=function(t){return t&&t.Settings&&(1==t.Settings.fadeBackground||"True"==t.Settings.fadeBackground||1==t.Settings.fadeBackground)}}}).call(window)},520:function(t,e){(function(){t.exports=function(u,d,c){this.activateSurvey=function(t,e,n,r,a,i,o){var s=c.walkthruSurveyActivator.surveyRepeat.key+t.TutorialId,l={tutorialId:t.Id,eventSource:e,callback:i,stepIndex:o,lastStepIndex:t.Steps.length-1,surveyPlayGUID:d._currentPlayGUID};u.activateSurvey(r,s,a,n,l)}}}).call(window)},521:function(t,e){(function(){t.exports=function(n,r,a,i,o,s){var t=this;function l(t,e){var n=e.wt;n.Id!=undefined&&r.safeStartAudit(t,n)}t.auditSafeStartStatus=l,t.redirect=function(t,e){i.currentStep=0,i.state=n.WALKTHRU_STATE.WAITING_FOR_REDIRECT,i.currentWalkthru=e.tutorialIndex,o.storeStateInCookie(),a.redirect(t)},t.auditStayButtonClicked=function(t){l(n.SAFESTART_ACTION.StayClicked,t)},t.auditSafeStartDisabled=function(t){var e={tutorialId:t.wt.TutorialId,tutorialName:t.wt.Name,playGuid:r._currentPlayGUID,playInitiator:r._currentPlayInitiator,status:n.SAFESTART_ACTION.ErrorShown};s.send(e)},t.auditSafeStartFirstStatus=function(t,e){l(t,e),function(t){for(var e=0;e<t.checkStepExistsTrace.length;e++)r.auditStep(t.wt,t.wt.Steps[t.checkStepExistsTrace[e].stepIndex],t.checkStepExistsTrace[e].stepStatus)}(e)}}}).call(window)},522:function(t,e){(function(){t.exports=function(a,i,o){this.migrateSiteConfigData=function(t){for(var e=a.getWalkthrus(),n={},r=0;r<e.length;r++)o.fixSteps(e[r],t),n[e[r].TutorialId]={siteConfig:t,isPackageHidden:_walkmeInternals.ctx.get("LibInitializer").isNextDataPackageIsHidden()};i.setMember("tutorialRunSettingsMap",n)}}}).call(window)},523:function(t,e){(function(){t.exports=function(a,i,o,t,s,l){var e=this;e.register=function(){t.registerDataAppender(e)},e.append=function(t,e){var n,r;s.isNewLanguage()&&a.setWalkthrus([]),n=e[o.Tutorial],r=(r=a.getWalkthrus()).concat(n),a.setWalkthrus(r),s.isNewLanguage()&&l.setDeployables(a.getWalkthrus()),i.migrateSiteConfigData(t.SiteConfig)}}}).call(window)},524:function(t,e){(function(){t.exports=function(g,T,f,h,E,t){var e=this;e.register=function(){t.registerConverter(e)},e.convert=function(t,e){for(var n=f.get(0).getAll(),r={},a=0;a<n.length;a++)for(var i=n[a].Steps,o=0;o<i.length;o++){var s=i[o];if(T.isActionStep(s)){var l=h.getSettingsValue(s.Settings,"action",null);if(l&&"setWalkMeData"==l.actionType){var u=l.arguments,d=u.dataKey;if(t[d]){var c=u.dataDuration;if(c>=g.ONE_DAY_SECONDS)if(r[d])c>r[d].Expiry&&(r[d].Expiry=c);else{var p=t[d];if(p!==undefined){var S={Value:p,Expiry:c};r[d]=S}}}}}}for(var d in r)r.hasOwnProperty(d)&&E.saveData(d,r[d].Value,parseInt(r[d].Expiry),e)}}}).call(window)},525:function(t,e){(function(){t.exports=function(n,r,a,t,e){function i(t,e){e.isDuringLanguageChange?n.stopTutorial(undefined,!0,!0):(e.isDestroyingAll&&(n.setMember("tutorialRunSettingsMap",{}),n.setMember("executeTutorialNextStepNotFinished",!1)),a.closePopup(),r.releaseAllEventBindings(),n.cleanCurrentStepResources())}this.init=function(){t.on(e.EVENTS.CallReleaseElementsFromBalloons,i)}}}).call(window)},526:function(t,e){(function(){t.exports=function(r,t){var a,e=this;function n(t,e,n){r.isPopupStep(e)&&(a=document.activeElement,n.Balloon.find(".walkme-custom-balloon-title").focus())}function i(t,e){r.isPopupStep(e)&&a&&(a.focus(),a=null)}e.register=function(){t.register(e)},e.bindEvents=function(){_walkmeInternals.bind("NewStepShown",n),_walkmeInternals.bind("StepCompleted",i),_walkmeInternals.bind("TutorialStopped",i)}}}).call(window)},527:function(t,e){(function(){t.exports=function(r){this.append=function(t){var e=r.getCurrentWalkthru();if(e){t.WalkthruId=e.TutorialId;var n=r.getCurrentStep();n&&(t.StepIndex=n.StepIndex)}}}}).call(window)},528:function(t,e){(function(){t.exports=function(t,n){this.init=function(){wmjQuery.each(t.get(),function(t,e){e.addAppender(n)})}}}).call(window)},529:function(t,e){(function(){t.exports=function(o,s,l,u){this.handle=function(t,e){if(s.isInPlayMode()){var n=t.Steps[e],r={step:n,tutorial:t};o.raiseEvent("WalkthruFailedToStart",r)}else{var a=u.getSiteConfigByTutorialId(t.Id),i=l.getSettingsValue(t.Settings,"cantPlayAlert",a.TutorialCantPlayText);_walkmeInternals.ctx.get("WalkthruPopupNotificationsService").showFailedToStartPopup(a,i,t)}}}}).call(window)},530:function(t,e){(function(){t.exports=function(a,e,n,o,i,s,r,l,u,d,c,p,S,g,T,f,h,E,I,k,_){this.register=function(){a.addActions(t)};var t={playWt:function(r,a,i){function t(){try{var t=r.playWtFromBeginning?0:l.getStepIndex(r.StepId,r.wtId);if(-1==t){var e=k.formatString("Step with id: {0} was not found in walkthru with id {1}",r.StepId,r.wtId);f.customerLog(e)}else WalkMeAPI.startWalkthruById({id:parseInt(r.wtId),fromStep:t,playInitiator:{type:a,objectId:i.Id}})}catch(n){var e=k.formatString("Failed starting walkthru with id {0}, starting from step {1}. Exception is: {2}",r.wtId,r.StepId,_.toJSON(n));f.customerLog(e)}}this.isValid=function(){return!0},this.Type=o.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){I.afterStepsLoaded(r.wtId,t)}},redirect:function(n){this.isValid=function(){return!0},this.Type=o.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){p.stepWasCompleted();var t=n.redirectUrl,e=r.redirect(t);e||(p.stepWasCompleted(),p.executeTutorialNextStep())}},refresh:function(){this.isValid=function(){return!0},this.doAction=function(){p.stepWasCompleted(),c.storeStateInCookie(),T.libSetTimeout(function(){location.reload(!0)},200)},this.Type=o.DEPLOYABLE_ACTION_TYPES.Action},branchWt:function(n,t,r){this.Type=o.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return t=n.wtId,!!u.getWalkthruById(t);var t},this.doAction=function(){var t,e=n.wtId;1==n.returnToWt?(t=l.getStepIndex(n.StepId,r.TutorialId),S.makeSplit([e],t,!1,n.startingStepId)):S.makeSplit([e],t,!0,n.startingStepId)},this.getGoToData=function(){var t=u.getWalkthruIndexByWalkthruId(n.wtId);return{tutorialIndex:t,stepIndex:0}}},stopWt:function(t){this.type="stopWt",this.Type=o.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return!0},this.doAction=function(){p.stepWasCompleted(),e.stopTutorial()}},playStep:function(r,t,a){this.Type=o.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return t=r.StepId,e=a.TutorialId,-1!=l.getStepIndex(t,e);var t,e},this.doAction=function(){var t=r.StepId,e=l.getStepIndex(t,a.TutorialId);p.stepWasCompleted(),d.currentStep<e&&p.fillMissingStepAudits(d.currentWalkthru,d.currentStep+1,e,o.STEP_STATUS.SkippedByActionStep),d.currentStep=e,p.executeCurrentStep()},this.getGoToData=function(){var t=r.StepId,e=l.getStepIndex(t,a.TutorialId),n=u.getWalkthruIndexByWalkthruId(a.TutorialId);return{tutorialIndex:n,stepIndex:e}}},openPlayerMenu:function(e,n,r){this.isValid=function(){return window.WalkMePlayerAPI!=undefined},this.Type=o.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){try{p.stepWasCompleted(),a.get("openMenu",e,n,r).doAction()}catch(t){f.error(t,"Failed opening player menu")}p.executeTutorialNextStep()}},waitForCond:function(a){this.Type=o.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return!0},this.doAction=function(){d.state=o.WALKTHRU_STATE.WAITING_FOR_CONDITION,c.storeStateInCookie();var e=d.getCurrentStep(),t={evaluationPollingIntervalMs:500,featureName:A,elementName:"Wait for condition step: "+e.StepTitle},n=h.createOld(t),r=a.condition;n.onValueChanged(function(t){g.isDebuggerOnWindow()&&s.deprecatedRaiseEvent(o.EVENTS.ActionConditionEvaluated,e),t&&(p.stepWasCompleted(),p.executeTutorialNextStep())}),n.evaluateAsync(r),p.addCurrentStepResource(n)}},delay:function(t){this.isValid=function(){return!0},this.doAction=function(){return c.storeStateInCookie(),T.playSetTimeout(function(){p.stepWasCompleted(),p.executeTutorialNextStep()},1e3*t.duration),!0},this.Type=o.DEPLOYABLE_ACTION_TYPES.Action},passOwnership:function(t,e,n){this.isValid=function(){return!0},this.Type=o.DEPLOYABLE_ACTION_TYPES.Action;var r={stepId:n.Id,tutorialId:n.TutorialId};this.doAction=function(){var t=i.keysConfig.passOwnership.newWindowTime;if(i.saveData(t.key,(new Date).getTime(),t.expiry),!E.get().enabled())return f.customerLog("Reached pass ownership step but the feature is not supported, the next step will not be executed."),void p.tutorialFinished();E.get().determineOwnership(r)}},setWalkMeData:function(e){this.isValid=function(){return!0},this.doAction=function(){var t=Math.min(e.dataDuration,o.COOKIE_LIFE_2_YEARS);n.saveData(e.dataKey,e.dataValue,t),p.stepWasCompleted(),p.executeTutorialNextStep()},this.Type=o.DEPLOYABLE_ACTION_TYPES.Action}},A="superstep"}}).call(window)},531:function(t,e){(function(){t.exports=function(n,r,a){var i;this.redirect=function(t,e){return!!n.canRedirect(t,e)&&(a.storeStateInCookie(),i=r.libSetTimeout(function(){n.redirect(t)},200),!n.isUrlDifferentFromCurrentOnlyInHash(t))},this.canRedirect=function(t,e){return n.canRedirect(t,e)&&!n.isUrlDifferentFromCurrentOnlyInHash(t)},this.clearRedirectTimer=function(){i&&i.clear()}}}).call(window)},532:function(t,e){(function(){t.exports=function(k,i,t,_,A,n,m,C,W,v,y,N,o,P,s,a,l,w,x,u,R){var L=this;L.getDelay=function(t){var e=n.get();return e.Settings.keyPressedNextStepDelay?e.Settings.keyPressedNextStepDelay:r};var r=2e3,d=[];function O(t,r,e,n,a){var i=undefined;a&&(i=function(t){var e,n=r.Settings.complexHtml;return(e="option"==t.target.tagName.toLowerCase()?t.target:t.target.options[t.target.selectedIndex]).value==n.val||e.text==n.txt});var o={change:i};n.push(U(t,0,["change"],e,1e3,o))}function U(t,e,r,a,i,n){N.state=W.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT;for(var o=M(function(t,e){_.customerLog("Step event triggered.");var n=-1!==wmjQuery.inArray("click",r);return D(a,i,n,t,e),!0}),s=0;s<r.length;s++){function l(e){return function(t){e&&!e(t)||o(t)}}var u=l(n&&n[r[s]]);b(t,r[s]+".mt",u)}return function(t){return o(null,t)}}function M(r){var a=!1;return function(t,e){var n;return a||(n=r(t,e),a=!0),n}}function b(t,e,n){a.bind(t,e,n),d.push({element:t,eventName:e})}function D(t,e,n,r,a){s.releaseBalloons(),n&&(i.shouldHandlePageAsFramesets()&&i.checkIfAnyFrameIsUnloaded(e),null!=r&&u.setIgnoreNextBeforeUnload(function(t){if(l.isIE()){var e=!1;if("a"==t[0].nodeName.toLowerCase())e=t;else{var n=t.parents("a");0<n.length&&(e=mtjQuery(n[0]))}if(e&&e.attr("href")&&0==e.attr("href").indexOf("javascript:"))return!0}return!1}(mtjQuery(r.target)))),N.state=W.WALKTHRU_STATE.RUNNING,o.storeStateInCookie(),y.stepWasCompleted(a==undefined),a!=undefined&&(N.currentStep=a),t&&a==undefined?y.tutorialFinished():k.playSetTimeout(function(){y.executeTutorialNextStep()},e)}L.handle=function(t,e,n,r,a,i){var o=N.getStep(n),s=!1,l=!!o.LinkedTutorialIds,u=[];if(l){var d=o.LinkedTutorialIds.split(";");y.isTutorialIdsExist(d)?(_.customerLog("This is a branched step. Branched walk-thru's: "+o.LinkedTutorialIds),u.push(function(e,n,r,t){N.state=W.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT,y.releaseEvents(e,n);for(var a=M(function(t){_.customerLog("Clicked the branched walk-thru."),y.releaseEvents(e,n),P.makeSplit(r)}),i=M(function(){y.releaseEvents(e,n)}),o=0;o<n.length;o++)b(e,n[o]+".mt",a);return function(){return i()}}(t,["click","mousedown"],d))):(_.customerLog("Branch walk-thru id, not found: "+o.LinkedTutorialIds),l=!1)}var c,p=!1,S=!1,g=y.getNextStepIncludingSplit(),T=null==g;if(y.isStepTrigger(o.End,W.WALKTHRU_STEP_TRIGGER.NEXT_BUTTON)&&(N.state=W.WALKTHRU_STATE.WAITING_FOR_NEXT_BUTTON_CLICK,T?S=!0:(g.IsSkippable||x.getSettingsValue(g.Settings,"skipNotExists",!1)||y.getPlayConditionMode(g)!=W.playConditionModes.STICKY_CONDITION&&!y.checkPlayStepCondition(g)||x.getSettingsValue(g.Settings,"fake",!1))&&-2==y.checkIfStepExistsWithSkippables(g.TutorialIndex,g.StepIndex,undefined,undefined,undefined,W.CHECK_STEP_MODE.Normal)?S=!0:p=!0),y.isStepTrigger(o.End,W.WALKTHRU_STEP_TRIGGER.NOTHING))T||(s=!0);else if(y.isStepTrigger(o.End,W.WALKTHRU_STEP_TRIGGER.HOVER))c=["mouseenter"],u.push(U(t,0,c,T,500));else if(y.isStepTrigger(o.End,W.WALKTHRU_STEP_TRIGGER.CLICK)&&!l)c=v.get(),u.push(U(t,0,c,T,1e3));else if(y.isStepTrigger(o.End,W.WALKTHRU_STEP_TRIGGER.KEY_PRESSED)){var f=L.getDelay(e);c=["keydown","paste","change"];var h={};A.isFeatureEnabled("wmAccessibility")&&(h.keydown=function(t){return 9!=t.which&&16!=t.which}),u.push(U(t,0,c,T,f,h))}else y.isStepTrigger(o.End,W.WALKTHRU_STEP_TRIGGER.PAGE_CHANGED)?(N.state=W.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE,y.setMember("dontContinueTutorial",!0)):y.isStepTrigger(o.End,W.WALKTHRU_STEP_TRIGGER.DURATION)?o.durationHandler=k.playSetTimeout(function(){y.stepWasCompleted(),y.executeTutorialNextStep()},1e3*o.Duration):y.isStepTrigger(o.End,W.WALKTHRU_STEP_TRIGGER.SELECT_ANY)?O(t,e,T,u,!1):y.isStepTrigger(o.End,W.WALKTHRU_STEP_TRIGGER.SELECT_VALUE)?O(t,e,T,u,!0):y.isStepTrigger(o.End,W.WALKTHRU_STEP_TRIGGER.SWIPE)&&(c=["swipe"],u.push(U(t,0,c,T,500)));if(o.Settings.additionalTriggers){C.deprecatedRaiseEvent(W.EVENTS.Walkthrus.StepAdditionalTriggerSet,o);var E={elementName:e.StepTitle||e.StepText,evaluationPollingIntervalMs:500,onlyPollConditionFunctions:!0,ownerChain:i},I=w.createOld(E);I.onValueChanged(function(t){if(C.deprecatedRaiseEvent(W.EVENTS.Walkthrus.StepAdditionalTriggersInitialized,o),t){y.setMember("dontContinueTutorial",!1),o.durationHandler&&(o.durationHandler.clear(),o.durationHandler=null);var e=m.containsFuncName(o.Settings.additionalTriggers,["ElementClicked"]);D(T,1e3,e)}}),I.evaluateAsync(o.Settings.additionalTriggers),y.addCurrentStepResource(I)}return{executeNextStep:s,clearElementEventsFuncs:u,buttons:{nextButton:p,doneButton:S,backButtonStepIndex:R.handleStepIndex(o,a,r)}}},L.releaseAllEventBindings=function(){for(var t=0;t<d.length;t++)try{var e=d[t].element,n=d[t].eventName;a.unbind(e,n)}catch(r){}d.length=0},function(){}.apply(null,arguments)}}).call(window)},533:function(t,e){(function(){t.exports=function(i,o,s,l){this.handleStepIndex=function(t,e,n){var r;if(0<t.StepIndex&&i.isStepTrigger(t.End,o.WALKTHRU_STEP_TRIGGER.NEXT_BUTTON)&&!function(t){if(null!=t){var e=s.getStep(t);return l.isActionStep(e)}return!1}(e)){if(0<=(r=i.checkIfStepExistsWithSkippables(n,t.StepIndex-1,0,-1,undefined,o.CHECK_STEP_MODE.Normal))){var a=s.getStep(r);i.isStepTrigger(a.End,o.WALKTHRU_STEP_TRIGGER.NEXT_BUTTON)||(r=-1)}s.lastBackButtonStepIndex=r}return r}}}).call(window)},534:function(t,e){(function(){t.exports=function(t,r,a,e,n){this.findFirstStep=function(t,e,n){return e=e||0,a.checkIfStepExistsWithSkippables(t,e,undefined,undefined,n,r.CHECK_STEP_MODE.Normal)},function(){}.apply(null,arguments)}}).call(window)},535:function(t,e){(function(){t.exports=function(r,a,i,t,e){function n(t,e){var n=r.mapBbcodeInitiator(e);a.deprecatedRaiseEvent("switchToWalkthru",t),i.afterStepsLoaded(t,function(){WalkMeAPI.startWalkthruById({id:t,fromStep:0,playInitiator:n})})}this.register=function(){t.add({linkSelector:".walkme-action-start-wt",idDataKey:"data-walkthru-id",clickEvent:e.EVENTS.BBCodeStartActionClicked.Walkthru,activator:n})}}}).call(window)},536:function(t,e){(function(){t.exports=function(i,t,o,s,l){function e(t,e){if(-1==t&&i.getCurrentWalkthru()){o.stop();var n=l.SURVEY_START_EVENTS.BbCodeClicked,r=i.getCurrentWalkthru(),a=r.Settings.survey&&r.Settings.survey.surveyId;_walkmeInternals.ctx.get("WalkthruSurveyActivator").activateSurvey(r,n,s.mapBbcodeInitiator(e),a,"always")}}this.register=function(){t.add({linkSelector:".walkme-action-start-survey",idDataKey:"data-survey-id",clickEvent:l.EVENTS.BBCodeStartActionClicked.Survey,activator:e})}}}).call(window)},537:function(t,e){(function(){t.exports=function(e,t){this.isEnabled=function(t){return e.isPopupStep(t)},this.findElement=function(){return t.get()}}}).call(window)},538:function(t,e){(function(){t.exports=function(e){this.isEnabled=function(t){return e.isActionStep(t)},this.findElement=function(t){return _walkmeInternals.ctx.get("WalkthrusModule").getAction(t).isValid()}}}).call(window)},539:function(t,e,n){(function(R){(function(){t.exports=function(t,e,n,r,a,i,o,s,l,u,d,c,p,S,g,T,f,h,E,I,k,_,A,m,C,W,v,y){var N,P;function w(){x(P)}function x(t){wmjQuery.each(t,function(t,e){e.register()})}this.init=function(){x(N),W.one(m.EVENTS.DATA_FILES_LOADED,w)},this.postDataFileLoaded=w,N=[n],(P=[r,e,i,l,S,g,k,_,R.get("WalkthruActionClickedEventBinder")]).push({register:function(){_walkmeInternals.ctx.get("DeployablesManagerFactory").add(m.DEPLOYABLE_TYPE.Tutorial,_walkmeInternals.ctx.get("TutorialsManager"))}}),P.push({register:function(){a.fixAnchorTagsOnBeforeUnload()}}),P.push({register:function(){s.addStopper({stop:function(){o.stopTutorial(!1,!0)}})}}),P.push({register:function(){u.init()}}),P.push({register:function(){_walkmeInternals.ctx.get("TutorialsManager").setDeployables(_walkmeInternals.ctx.get("WalkthrusContainer").getWalkthrus())}}),P.push({register:function(){d.addDeployable(c.Tutorial,p,c.BusinessSolution)}}),P.push({register:function(){I.register(h),I.register(E)}}),P.push({register:function(){f.addRestorer(T,!0)}}),P.push({register:function(){_walkmeInternals.ctx.get("WalkthruEventsInitializer").init()}}),P.push({register:function(){wmjQuery.extend(t,_walkmeInternals.ctx.get("WalkthruLegacyExternalApi")),window.WalkMeAPI&&wmjQuery.extend(window.WalkMeAPI,_walkmeInternals.ctx.get("WalkthruApi"))}}),P.push({register:function(){A.addOwnershipManager(m.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru,C,!0)}}),P.push({register:function(){v.addAutoStartHelper(y,c.Tutorial)}})}}).call(window)}).call(this,n(1))},540:function(t,e){(function(){t.exports=function(i,o,s,a,l,u,d,c,p,S,t,e,n,g,T,f){var h,r=this;function E(t){var e=T.getCurrent()==o.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru,n=e?T.getCurrentStepData():function(){var t=f.getData(o.PASS_OWNERSHIP.PASS_OWNERSHIP_COOKIE,undefined,p.getUserGuid());if(t)return{walkthruId:t.tutorialId,step:c.getStepByWalkthruAndStepIds(t.tutorialId,t.stepId)}}(),r=a.evaluateOwnership(n.step,n.walkthruId,e);return e||t||function(t){switch(t){case o.PASS_OWNERSHIP.EvaluateOwnership.Owner:s.stepWasCompleted(),s.executeTutorialNextStep();break;case o.PASS_OWNERSHIP.EvaluateOwnership.NotOwner:u.state!=o.WALKTHRU_STATE.PASSING_OWNERSHIP&&u.currentStep++,u.state=o.WALKTHRU_STATE.PASSING_OWNERSHIP,d.storeStateInCookie()}}(r),r}r.walkthruStarted=function(r,a){return T.wrap(o.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru,(t=r,e=a,{walkthruId:(n=l.getWalkthruByIndex(t)).Id,step:n.Steps[e]}),function(){return t=r,e=a,(n=i.get().optimizedDetermineOwnership())||(u.state=o.WALKTHRU_STATE.WAITING_FOR_OWNERSHIP,u.currentWalkthru=t,u.currentStep=e,d.storeStateInCookie(),s.terminateTutorial(),u.state=o.WALKTHRU_STATE.NOT_RUNNING,i.get().reset()),n;var t,e,n});var t,e,n},r.evaluateOwnership=function(t,e){return e?T.wrap(o.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru,e,function(){return E(t)}):E(t)},r.evaluateOwnershipByPeeking=function(){return(n.isFeatureEnabled("po_peek")||n.isFeatureEnabled("passOwnership"))&&a.isPassOwnershipStep(e.peekNextCookieStep())},r.gainedOwnership=function(t,e,n){var r;h("walkthru is gaining ownership with state "+u.state,3),n&&(r=e,t?(_walkmeInternals.ctx.get("WalkthrusModule").setMember("dontContinueTutorial",!1),g.resumeTimeoutsArray("playTimeouts")):(h("ownership granted to: "+r,3),S.restoreStateFromCookie(p.getUserGuid())))},r.lostOwnership=function(){_walkmeInternals.ctx.get("WalkthrusModule").terminateTutorial()},h=t.wrapCustomerLog(o.PASS_OWNERSHIP.LOG_FEATURE)}}).call(window)},541:function(t,e){(function(){t.exports=function(s,l,u,d){this.peekNextCookieStep=function(t){try{t=t||0;var e=s.getData(l.STORAGE_KEYS.WALKTHRU_PERSISTENCE_DATA,{},d.getAllUserGuids()[0]),n=e[l.WALKTHRU_PERSISTANCE_DATA_FIELDS.CURRENT_TUTORIAL_COOKIE_NAME],r=u.getWalkthruById(n),a=e[l.WALKTHRU_PERSISTANCE_DATA_FIELDS.CURRENT_STEP_COOKIE_NAME],i=r.Steps[a+t];return i}catch(o){return null}}}}).call(window)},542:function(t,e){(function(){t.exports=function(r){function a(t){return t&&t.Settings&&t.Settings.action&&t.Settings.action.actionType==r.STEP_ACTION.PassOwnership}this.isPassOwnershipStep=a,this.evaluateOwnership=function(t,e,n){return n&&!a(t)?r.PASS_OWNERSHIP.EvaluateOwnership.CantBeDetermined:function(t,e){if(null===t)return _walkmeInternals.ctx.get("WalkthruStepsLoader").LoadStepsForWT(e),!1;try{return _makeTutorial.evaluateConditionTree(t.Settings.action.arguments.condition)}catch(n){return!0}}(t,e)?r.PASS_OWNERSHIP.EvaluateOwnership.Owner:r.PASS_OWNERSHIP.EvaluateOwnership.NotOwner}}}).call(window)},543:function(t,e){(function(){t.exports=function(p,S,g,T,f){var h,E;this.clearCache=function(){h=undefined,E=undefined},this.checkShouldAutoStart=function(t,e,n){return t!=p.Tutorial||(i=e,o=n,s=S.getWalkthruIndexByWalkthruId(i.Id),l=g.checkTutorialSkipFirstStepCondition(s),u=g.checkTutorialRedirectCondition(s,!1),d=i.IsWelcomeStep,h||(h=T.get()),!((c=h).state==f.WALKTHRU_STATE.RUNNING&&c.step==l)&&(r=c,a=o,E!=undefined?E:E=r.state==f.WALKTHRU_STATE.PAUSED||r.state==f.WALKTHRU_STATE.NOT_RUNNING||!a&&g.checkIfStepExistsWithSkippables(r.tutorial,r.step,undefined,undefined,undefined,f.CHECK_STEP_MODE.Sandbox,"- Engagement")<0)&&(u&&d||g.checkIfStepExistsWithSkippables(s,l,undefined,undefined,undefined,f.CHECK_STEP_MODE.Sandbox,"- Check if Exists with Skippables")>=l&&!u));var r,a,i,o,s,l,u,d,c}}}).call(window)},544:function(t,e){(function(){t.exports=function(e,n,r){this.get=function(){var t=e.getPersistenceData();return r.state==n.WALKTHRU_STATE.PAUSED&&(t.state=r.state),t}}}).call(window)},545:function(t,e){(function(){t.exports=function(e,n,r){this.isRunning=function(){var t=e.get();return t.state==r.WALKTHRU_STATE.PAUSED||t.state==r.WALKTHRU_STATE.NOT_RUNNING||n.checkIfStepExistsWithSkippables(t.tutorial,t.step,undefined,undefined,undefined,r.CHECK_STEP_MODE.Sandbox,"- Engagement")<0?wmjQuery.Deferred().reject():wmjQuery.when()}}}).call(window)},546:function(t,e){(function(){t.exports=function(n,r){this.fixAnchorTagsOnBeforeUnload=function(){if(n.isIE()){var t=mtjQuery("a[href^='javascript:']"),e="click.walkme.ignoreUnload";t.off(e),t.on(e,function(){r.setIgnoreNextBeforeUnload(!0)})}}}}).call(window)},547:function(t,e){(function(){t.exports=function(a,i,t){function e(t){t=parseInt(t);for(var e=a.stepPlayHistory,n=0;n<e.length;n++){var r=i.getStepById(e[n]);if(r&&r.StepIndex==t)return!0}return!1}this.register=function(){t.addSupportedFunction("isStepPlayed",e)}}}).call(window)},548:function(t,e){(function(){t.exports=function(s,n,l,u,o,i,d){this.register=function(){wmjQuery.each(t,function(t,e){n.register(t,e.handler,e.params)})};var t={};function r(t,e){for(var n=parseInt(e.funcArgs.StepId),r=i.stepPlayHistory,a=0;a<r.length;a++)if(r[a]==n)return void t.setValue(!0);t.setValue(!1)}function e(t,e){E(r,t,e)}function a(t,e){for(var n=parseInt(e.funcArgs.StepId,10),r=0;r<i.stepCompletedHistory.length;r++)if(i.stepCompletedHistory[r]==n)return void t.setValue(!0);t.setValue(!1)}function c(t,e){E(a,t,e)}function p(t,e){var n=parseInt(e.funcArgs.StepId),r=parseInt(e.funcArgs.TutorialId),a=l.getWalkthruById(r),i=u.getStepIndex(n,r);if(a&&-1<i){var o=a.Steps[i];t.setValue(!1!==s.findElement(o,!1))}else t.setValue(!1)}function S(t,e){E(p,t,e)}function g(t,e){var n=parseInt(e.funcArgs.StepId),r=parseInt(e.funcArgs.TutorialId),a=l.getWalkthruIndexByWalkthruId(r),i=u.getStepIndex(n,r);-1<i&&-1<a&&0<=o.checkIfStepExistsWithSkippables(a,i,undefined,undefined,undefined,d.CHECK_STEP_MODE.Sandbox)?t.setValue(!0):t.setValue(!1)}function T(t,e){E(g,t,e)}function f(t,e){var n=parseInt(e.funcArgs.StepId),r=parseInt(e.funcArgs.TutorialId),a=l.getWalkthruById(r),i=u.getStepIndex(n,r);if(a&&-1<i){var o=a.Steps[i];t.setValue(!1!==s.findElement(o,!0))}else t.setValue(!1)}function h(t,e){E(f,t,e)}function E(t,e,n){t(e,n),e.setValue(!e.getValue())}t.StepPlayed={handler:r},t.StepNotPlayed={handler:e},t.StepCompleted={handler:a},t.StepNotCompleted={handler:c},t.StepExists={handler:p,params:{editorPreview:!0}},t.StepNotExists={handler:S,params:{editorPreview:!0}},t.StepCanPlay={handler:g},t.StepCannotPlay={handler:T},t.StepIsVisible={handler:f,params:{editorPreview:!0}},t.StepIsNotVisible={handler:h,params:{editorPreview:!0}}}}).call(window)},549:function(t,e){(function(){t.exports=function(o,s,l,u){this.auditWalkthruStart=function(t,e,n,r,a){if(u.isEnabled()){var i=t.Steps;s.postEvent(s.EVENT_TYPES.Play,{type:s.getEventAppByDeployable(o.Tutorial),oId:t.TutorialId,oName:t.Name,pId:a||-1,pInit:l.map(e),oRequestedSubObject:i[n].Id,oActualSubObject:i[r].Id})}},function(){}.apply(null,arguments)}}).call(window)},550:function(t,e){(function(){t.exports=function(p,S,g,T,a,f,h,E,I,e,k){var _,A=this;A.safeStartAudit=function(t,e){if(!k.isEnabled())return _("Audit steps manager - Auditing is disabled, doing nothing",3),!0;try{var n={tutorialId:e.TutorialId,tutorialName:e.Name,playGuid:A._currentPlayGUID,playInitiator:A._currentPlayInitiator,status:t};a.send(n)}catch(r){p.error(r)}},A.auditStep=function(t,e,n){!function(t,e){if(t!=S.STEP_STATUS.SkippedByActionStep){var n=t==S.STEP_STATUS.SkippedStartedFromBiggerStep?S.EVENTS.Walkthrus.NewSkippedStep:S.EVENTS.Walkthrus.CheckNewStep;I.deprecatedRaiseEvent(n,e)}}(n,e);var r,a,i,o,s,l,u,d=t.Steps.length;if(!k.isEnabled())return _("Audit steps manager - Auditing is disabled, doing nothing",3),!0;if(e.TutorialId<0)_(g.formatString("Audit steps manager - Step with id {0} has negative tutorial id ({1})",e.Id,e.TutorialId),3);else try{try{return r=e,a=t,i=d,o=n,s=h.getSettingsValue(r.Settings,"action",""),T.postEvent(T.EVENT_TYPES.Play,{type:T.EVENT_APPS.Step,oId:r.Id,oName:r.StepTitle||"",aType:(u=s,u?f.map(u.actionType):""),aAppType:(l=s,l?E.map(l.actionType):""),oType:r.Type,indx:r.StepIndex+1,owId:a.TutorialId,owName:a.Name,owType:T.EVENT_APPS.Walkthru,total:i,status:o,pId:A._currentPlayGUID})}catch(c){return p.error(c,"Failed auditStep: stepId="+e.Id+", wtId="+t.TutorialId+", status="+n+", pId="+A._currentPlayGUID),!0}}catch(c){return p.error(c),c}},this._currentPlayGUID="",this._currentPlayInitiator=null,this.createPlayGuidIfNeeded=function(t){A._currentPlayGUID!=undefined&&0!=A._currentPlayGUID.length||(A._currentPlayGUID=e.generateNewPlayGuid(t))},function(){_=p.wrapCustomerLog(S.LOG_FEATURES.AUDIT_STEPS)}.apply(null,arguments)}}).call(window)},551:function(t,e){(function(){t.exports=function(t,e,n,r){this.register=function(){t.add(n.ENTITY_TYPE.step,e.EVENT_SENDER_EVENT_APPS.Step,function(){return r._currentPlayGUID})}}}).call(window)},552:function(t,e){(function(){t.exports=function(u,d){this.calculate=function(t,e){var n,r,a,i,o,s,l=undefined;return t.Type===d.stepType.Simple?(i=t.End,l=-1<wmjQuery.inArray(d.stepTrigger.Button.toString(),i.split(","))?{next:!0}:{}):(r=(n=t).Settings&&n.Settings.popupStepButtons||[],a={},u.foreach(r,function(t){var e=c[t.action];a[e]=!0}),l=a),e&&wmjQuery.extend(l,(s={},0<(o=e).passedVisibleSteps&&(s.back=!0),o.passedVisibleSteps<o.totalVisibleSteps&&(s.next=!0),o.passedVisibleSteps!==undefined&&o.passedVisibleSteps===o.totalVisibleSteps&&(s.done=!0),s)),l};var t,c={};t=d.POPUP_BUTTON_ACTIONS,c[t.NextDone]="next",c[t.Start]="start",c[t.Back]="back",c[t.Cancel]="cancel"}}).call(window)},553:function(t,e,n){(function(_){(function(){t.exports=function(u,d,c,p,S,g,T,f,h,E,I,k){this.showStep=function(t,e,n){var r=c.secureEvalJSON(t);p.fixStep(r,0,f.get());var a=d.findElement(r);if(u.customerLog("element:",5),u.customerLog(a,5),!a)return!1;var i,o,s=S.getComplexHtmlElements(r,a);s&&(a=s.elements,i=s.parentElement),(o=r).DesignTemplateId||o.DesignTemplatePlaceholderConfigs&&0!==o.DesignTemplatePlaceholderConfigs.length||(r.DesignTemplatePlaceholderConfigs=I.createPlaceHolderConfigs(k.templateEntityType.balloon,r.StepTitle,r.StepText));var l=_.create("Balloon",{element:a,parentElement:i,forceEmbedBalloonInIframe:e,positionHelper:g,stepSettings:r.Settings,visibilityFilter:g.getVisibleFilterKey(r),text:{title:r.StepTitle,content:r.StepText,subText:function(t){if(!t)return"";var e=f.get().StepsInfoText;return e?e=(e=e.replace("{0}",t.passedVisibleSteps)).replace("{1}",t.totalVisibleSteps):""}(n)},position:r.Position,data:{stepId:r.Id,type:r.Type},buttons:E.calculate(r,n),configuration:r.Configuration,logger:u,drawer:T.getBalloonDrawer(r.Configuration,r),isViewStep:!0,siteConfig:f.get(),bindButtonsFunc:_.get("BalloonButtonsEventsBinder").attachBalloonXButtonClickEvent,placeholderConfigurations:r.DesignTemplatePlaceholderConfigs});return h.add(l),l.Show(!0,function(){l.SetTimeoutOn()}),l}}}).call(window)}).call(this,n(1))}}]);